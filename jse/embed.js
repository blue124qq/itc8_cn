(function(){window.tlRequire=window.tlRequire||{};var d=window.tlRequire;var b=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;var a=/([^\s,]+)/g;function c(g){var f=g.toString().replace(b,"");var e=f.slice(f.indexOf("(")+1,f.indexOf(")")).match(a);return e||[]}(function(k){var g={};var i=function(m){return{waitList:[],waitCount:0,callback:null,definition:null,dependencies:null,async:null,id:m}};var h=function(o,n,m){f(o,n,m,true)};var f=function(t,q,m,p){p=p||false;g[t]=g[t]||i(t);var s=g[t];s.callback=m;s.dependencies=q;s.async=p;for(var o=0;o<q.length;o++){var n=q[o];if(!g[n]){g[n]=i(n)}var r=g[n];if(!r.definition){r.waitList.push(s);s.waitCount++}}if(s.callback&&s.waitCount===0){e(s)}};var j=function(r){var p=c(r),o=[];for(var n=0;n<p.length;n++){var m=p[n];var q=g[m];l(q);e(q);o.push(q.definition)}return function(){r.apply(undefined,o)}};var l=function(o){for(var m=0;m<o.waitList.length;m++){var n=o.waitList[m];n.waitCount--;if(n.callback&&n.waitCount===0){e(n)}}};var e=function(p){var m=[];for(var o=0;o<p.dependencies.length;o++){var n=p.dependencies[o];var q=g[n];m.push(q.definition)}if(p.async){m.push(function(s,r){if(s){p.definition=r;l(p)}});p.callback.apply(undefined,m)}else{p.definition=p.callback.apply(undefined,m);l(p)}};k.define=f;k.defineAsync=h;k.inject=j}(d))}());function extractHostname(b){var a;if(b.indexOf("://")>-1){a=b.split("/")[2]}else{a=b.split("/")[0]}a=a.split(":")[0];a=a.split("?")[0];return a}function extractRootDomain(b){var d=extractHostname(b),c=d.split("."),a=c.length;if(a>2){if(c[0]==="www"){d=c.slice(1,a).join(".")}else{d=c.slice(0,a).join(".")}}return d}function isExternalDomain(a){var b=["thinglink.com","thinglink.me","cdn.thinglink.me","vr.thinglink.com","app.widgets.thinglink.com","widgets.thinglink.com","thinglink.local","sandbox.thinglink.com","guess.thinglink.com","video.thinglink.com","thingpic.com","tlsrv.net"];return b.indexOf(a)===-1}function isExceededTime(c){var d=new Date(c);var b=new Date();var a=1000*60*60*24;var e=b.getTime()-d.getTime();var f=e/a;if(Math.floor(f)>30){return true}else{return false}}function createGdprOverlay(a,d){var f="https://thinglink.com/terms";var c=jQuery('<div id="tlGdprOverlay">').appendTo(a);c.append('<div class="text">');var h=c.find(".text");var e="<p>"+d+' contains embed content from <span class="contentLinks"></span>By choosing to play this <span>'+d+"</span> you accept that you will be subject to their respective Terms of Service.";var b='<button class="gdpr-btn-accept">accept</button>';var g='<p class="tlTerms"><a href="'+f+'" target="_blank">Terms of service</a></p>';h.append(e);h.append(b);h.append(g)}function acceptGDPR(){var d=jQuery(this).data("id");var a=jQuery(this).data("domains");var c={mediaId:d,domains:a,timestamp:new Date()};try{window.localStorage.setItem("tl-"+d,JSON.stringify(c))}catch(b){console.error("[ThingLink] Exception accessing local storage.",b)}jQuery("#tlGdprOverlay").remove()}var GdprUtils={extractHostname:extractHostname,extractRootDomain:extractRootDomain,isExternalDomain:isExternalDomain,isExceededTime:isExceededTime,createGdprOverlay:createGdprOverlay,acceptGDPR:acceptGDPR};if(window.tlRequire){tlRequire.define("gdprUtils",[],function(){return{extractHostname:extractHostname,extractRootDomain:extractRootDomain,isExternalDomain:isExternalDomain,isExceededTime:isExceededTime,createGdprOverlay:createGdprOverlay,acceptGDPR:acceptGDPR}})}tlRequire.define("EventDispatcher",[],function(){var a=function(){this._listeners={}};a.prototype={constructor:a,addListener:function(b,c){if(!this._listeners[b]){this._listeners[b]=[]}this._listeners[b].push(c)},trigger:function(d,f){var c=this._listeners[d],e;if(c){e=c.slice(0);var b;for(b=0;b<e.length;b++){e[b].call(this,f)}}},removeListener:function(d,e){var c=this._listeners[d];if(c){var b;for(b=0;b<c.length;b++){if(c[b]===e){c.splice(b,1);break}}}}};return a});tlRequire.define("abTest",["hashing"],function(a){var g={};function d(){var k=0;try{k=localStorage.getItem("tlJsUserId");if(!k){k=Math.floor(Math.random()*100);localStorage.setItem("tlJsUserId",k)}}catch(l){console.error("[ThingLink] Exception accessing local storage.",l)}return k}var h=function(k,n,o,m){var l={start:n,end:o,variant:m};if(!g.hasOwnProperty(k)){g[k]=[]}g[k].push(l)};var i=function(k,m){var n=g[k];var l;if(typeof n==="undefined"){return null}for(l=0;l<n.length;l++){var o=n[l];if((o.start<=m)&&(o.end>=m)){return o.variant}}return null};var e=function(k,m){var l=Math.abs(m^a.adler32(k))%100;return i(k,l)};var j=function(k){return e(k,d())};var b=function(m){var k=[];var l;for(l in g){if(g.hasOwnProperty(l)){var n=e(l,m);k.push({testName:l,variant:n})}}return k};var c=function(){return b(d())};var f=function(){g={}};return{addBucket:h,variantForUser:j,activeTestsForUser:c,clear:f,internals:{variantForUserId:e,activeTestsForUserId:b,variantForUserBucketPoint:i}}});tlRequire.define("actionLogger",["jQuery","config","eventCallback","util","abTest"],function(n,t,m,b,i){var j={};var d={};var u={};var k={};var g=b.isTouchDevice;var e=(function(){var x=null;var v=null;function w(A,y){var B=true;var z=new Date().getTime();if(v&&!y){if(z-v<5000){B=false}}if(t.referer){A.referer=t.referer}if(B){if(x){clearTimeout(x);x=null}x=setTimeout(function(){n.getJSON(t.getApiBaseUrl()+"/api/internal/logActivity?callback=?",A)},200);if(!y){v=z}}}return w}());function p(z,y){var w=y[z];var v=new Date().getTime();var x=(w&&(v-w<5000))?false:true;return x}function a(x,v,A,C){var w=p(x,d);if(!w){return}var y={event:"tagClick",scene:v,tag:x};m(A,y);var B=t.getApiBaseUrl();var z={thing:x,sceneId:v,e:"click",referer:t.referer};n.getJSON(B+"/api/internal/logThingAccess?callback=?",z,C);d[x]=new Date().getTime()}function r(v,w){if(g&&!k[v]){k[v]=true;return true}return w}function f(y,w,z){var x=p(y,j);if(!x){return}u[y]=new Date();var A=t.getApiBaseUrl();var v=r(w);setTimeout(function(){n.getJSON(A+"/api/internal/logThingAccess?callback=?",{thing:y,sceneId:w,e:"hover",referer:t.referer,dwell:v});var B={event:"tagHover",scene:w,tag:y};m(z,B)},500);j[y]=new Date().getTime()}var l=function(x){var y=x.data("entertime");if(y){var z=(new Date()).getTime()-y;if(z>250){var w=x.find("img").attr("tl-scene-id");var v=r(w);if(w){setTimeout(function(){n.getJSON(t.getApiBaseUrl()+"/api/internal/logSceneAccess?callback=?",{time:z,sceneId:w,referer:t.referer,dwell:v,event:"scene.hover"})},500)}x.removeData("entertime")}}};var c=function(x,w){var v=x.trackingUrl;if(v){v=v.replace("RANDOM",Math.floor(Math.random()*1000000000));v=v.replace("[timestamp]",new Date().getTime());w.find("img.tlTracker").remove();w.append('<img class="tlTracker" src="'+v+'" style="position:absolute;width:1px;height:1px;top:0;left:0;">')}};var s=function(B){var D=B.width();var A=Math.floor(D/100)*100;var F=Math.floor(B.height()/100)*100;var y=Math.floor(window.screen.width/100)*100;var z=Math.floor(window.screen.height/100)*100;var G=/iPad/.test(navigator.platform);var x=/iPhone/.test(navigator.platform);var C=G?"iPad":x?"iPhone":"unknown";var H=i.activeTestsForUser();var v=null;var w=navigator.userAgent.toLowerCase();if(w.indexOf("msie")!==-1){v="IE"+(parseInt(w.split("msie")[1]).toString())}H.push({testName:"r_imageWidth",variant:D.toString()});H.push({testName:"r_imageHeight",variant:B.height().toString()});H.push({testName:"r_imageWidthHundred",variant:A.toString()});H.push({testName:"r_imageHeightHundred",variant:F.toString()});H.push({testName:"r_screenWidth",variant:window.screen.width.toString()});H.push({testName:"r_screenHeight",variant:window.screen.height.toString()});H.push({testName:"r_screenWidthHundred",variant:y.toString()});H.push({testName:"r_screenHeightHundred",variant:z.toString()});H.push({testName:"r_mobileDevice",variant:C});H.push({testName:"r_ieVersion",variant:v});var E=JSON.stringify(H);return E};var q;var o=function(x){var w=x.find("img.thinglinkImage");var v=w.attr("tl-scene-id");if(v&&v!=q){var y=w.tlImage("sceneData");c(y,x);setTimeout(function(){n.getJSON(t.getApiBaseUrl()+"/api/internal/logSceneAccess?callback=?",{sceneId:v,referer:t.referer,event:"scene.view",channelId:b.getChannelId(x)})},500);q=v}};var h=function(w,v){var x=u[w];if(x){var y=(new Date()).getTime()-x;if(y>250){if(v){setTimeout(function(){n.getJSON(t.getApiBaseUrl()+"/api/internal/logThingAccess?callback=?",{time:y,sceneId:v,thing:w,e:"hoverend",referer:t.referer})},500)}u[w]=null}}};return{calcABTestString:s,logActivity:e,logHoverTime:l,logHoverEnd:h,logClick:a,logHover:f,logSceneView:o,installTracker:c}});tlRequire.define("adMatcher",[],function(){function b(){var c=["1.\\d+.\\d+.\\d+","127.0.0.\\d+","localhost","46.45.138.126","abs.twimg.com","ad.doubleclick.net","ad.flatmaids.de","ad.zanox.com","ad.adriver.ru","ad.admitad.com","ad.dumedia.ru","ad.linksynergy.com","ad-cdn.technoratimedia.com","ad\\d.adfarm1.adition.com","ad1.emediate.dk","ad.retargeter.com","adsfac.eu","adfarm.mediaplex.com","adfile.tattermedia.com","admax.quisma.com","admeta.vo.llnwd.net","adscale.nuggad.net","adserver.wesee.com","ads.foodbuzz.com","ads.giovannicintolo.com","ads.guava-affiliate.com","ads.heias.com","ads.jetpackdigital.com","ads.nelly.com","ads.newtentionassets.net","ads.studentmedia.ucla.edu","ads.thinglink.com","ads.jetpackdigital.com","adtag.neodatagroup.com","adtracker.meinungsstudie.de","aka-cdn-ns.adtech.de","ads\\d.unitymedia.de","analytics.sanoma.fi","analytics.spongecell.com","api.zanox.ws","api.here.com","ariel1.spaceprogram.com","asn.advolution.de","as.aug.me","avatars.scribblelive.com","b.aol.com","b.kavanga.ru","b.thebestlinks.com","b.scorecardresearch.com","bid.openx.net","brandnamic.adclear.net","brightcove.vo.llnwd.net","bs.serving-sys.com","cas.criteo.com","cepep.co","cdn.flashtalking.com","c.statcounter.com","counters.gigya.com","cdn\\d*.gigya.com","counter.rambler.ru","creatives.klikki.com","cxpfy.com","d.shareaholic.com","delatv.com","d1.openx.org","delivery.ctasnet.com","engine.adzerk.net","fapp.im","fraction8.com","\\w+.visadd.com","geo.yahoo.com","getpocket.com","g.doubleclick.net","gravatar.com","\\w+.gmads.mookie1.com","hits.e.cl","i-cdn.servedbyopenx.com","imp\\w?\\w?.tradedoubler.com","imagesrv.adition.com","img-cdn.mediaplex.com","pictela.net","jptracking.elasticbeanstalk.com","\\w+.googleapis.com","khm\\d.google.com","l.betrad.com","\\w+.lijit.com","links.es","leerya.net","\\d+.maps.nlp.nokia.com","mdsad.com","mt\\d.googleapis.com","malvin.tv","maps.googleapis.com","maps.google.com","next.playad.se","notici.me","notifreak.com","networkanalytics.net","oas.theblondesalad.com","otile\\d.mqcdn.com","pagead\\d.googlesyndication.com","paypal.com","peliculasid.biz","pictela.net","pixel.wp.com","pulsemaps.com","readitlaterlist.com","remnant.fmpub.net","reports.wizebar.com","s0.2mdn.net","s\\d+.adform.net","s\\d+.addthis.com","s\\d+.shinystat.com","stats.wordpress.com","sitemeter.com","sm\\d+.sitemeter.com","tag.admeld.com","t.qservz.com","t.socialgrowthtechnologies.com","tags.bluekai.com","tessera\\d+.intellicast.com","tile.openstreetmap.org","\\w+.tile.openstreetmap.org","track.adform.net","track.admaxim.com","tracking.hubspot.com","traffic.shareaholic.com","trk.lqw.me","trk-\\w+.tidaltv.com","us-ads.openx.net","view.adtraxx.de","videosomg.com","widgets.kiosked.com","w.uptolike.com","www.ftjcfx.com","www.getfreebacklinks.com","www.google.com","www.w3counter.com","www\\d+.a8.net","www.divxatope.com","www.etracker.de","www.callefina.com","www.googleadservices.com","www.google-analytics.com"];return new RegExp("//("+c.join("|").replace(".","\\.")+")")}var a=b();return a});tlRequire.define("animUtil",["jQuery"],function(b){function a(e,c,d,f){if(f===undefined){f="easeOutCubic"}if(d===undefined){d=100}if((c.length>30)||typeof(document.addEventListener)==="undefined"){if(e==="show"){c.show()}else{c.hide()}}else{c.stop(true,true);if(e==="show"){c.fadeIn(d,f)}else{c.fadeOut(d,f)}}}return{variateOpacity:a}});tlRequire.define("browserFeats",["jQuery"],function(a){var b=(function(){var f=null;var g=null;var e=function(h){var i=false;h(function(j){i=true});return i};var c=function(){if(f===null){f=e(function(h){var j=a("html"),i=j[0];j.bind("DOMAttrModified",h);i.setAttribute("___test___",true);i.removeAttribute("___test___");j.unbind("DOMAttrModified")})}return f};var d=function(){if(g===null){g=e(function(h){var i=a("html");i.bind("DOMNodeInserted",h);a("<span />").appendTo(a("body")).remove();i.unbind("DOMNodeInserted")})}return g};return{hasDomAttrModified:c,hasDomNodeInserted:d}}());return b});tlRequire.define("bubbleRenderer",["jQuery","config","util","cssUtil","postMessageManager","customization"],function(i,b,e,j,g,d){function c(o,q,p){var l;if(q.indexOf("<")!==-1){l=i("<p>"+q+"</p>").text().length}else{l=q.length}var m=0;if(l<50){m=100+l}else{m=100+(l/2.5);if(m>350){m=350}if(l>300){o.addClass("tlLongDescription")}else{if(l>100){o.addClass("tlSemiLongDescription")}}}var n=j.parseCssText(o.attr("style"),false,false);if(p>0&&p<m){m=p}n["min-width"]=m+"px";o.css({cssText:e.mapToCssText(n,true)})}function a(l){return l.charAt(0).toUpperCase()+l.slice(1)}function h(m){var l=new RegExp("^[\u0000-\u001F\\s]*[\u0600-\u06FF\u0750-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]");return !!m&&m.match(l)}function k(m,q,s){var l=new RegExp("([^.]+\\.(?:co\\.)?[a-z]{2,7})$"),n,u,t=(s&&s.openlink)||"AUTO",p;try{n=l.exec(window.location.hostname)[0]}catch(o){n=window.location.hostname}if(t==="NEW"){u=false}else{if(t==="SAME"){u=true}else{if(t==="NONE"){if(q){q()}return}else{u=new RegExp("(^https?://(?:[^/]*)|&url=http[^&]+)"+n).test(m)||(m.indexOf("://")===-1)}}}if(u){if(q){q(function(){window.open(m,"_top")})}else{window.open(m,"_top")}}else{if(q){q()}p=window.open(m);p.opener=null}}function f(x,L,p){var I;var P;var l;var O,z;var J;var u;var v=x.thingUrl||"";var C="tl-a-"+x.id;var t=i(window).width()-40;var y=i(window).height()-36;var w=t-15;var q=y-14;if(x.productName.indexOf("\n")!==-1){x.productName=x.productName.replace(/\n\n+/g,"\n\n").replace(/\n/g,"<br>")}var D=h(x.productName)?"tlRtl":"";if(x.theme==="iframe"){var H=x.iWidth;var s=x.iHeight;l=g.prepareAndGetParameters(x.contentUrl);P=l.srcPmParams;I=l.rtid;var M='<iframe class="tlIframe" allowfullscreen="true" allowTransparency="true" name="rmt-'+x.id+'" scrolling="auto" src="'+x.contentUrl+P+'" style="width:'+H+"px !important; height:"+s+"px !important;max-width: "+w+"px!important; max-height:"+q+'px!important;" frameBorder="0"></iframe>';var G;if(x.productName!=null&&x.productName.length>0&&!(x.hideDescription)){G='<div class="tlIframeDescription '+D+'">';G+=x.productName;G+="</div><hr>"}else{G=""}J=i('<div class="tlThingText" id="'+C+'" style="max-width:'+t+"px!important; max-height:"+y+'px!important;"><div class="tlThingClose"></div><div class="tlThingContent" style="max-width:'+t+"px!important; max-height:"+y+'px!important;">'+G+'<div class="tlSpinner" style="width:'+H+"px!important;height:"+s+'px!important;"></div></div><div class="tlArrowWrapper"><div class="tlArrow"></div></div></div>');z=function(){var S=J.find(".tlThingContent > .tlSpinner");var R=S.find(".tlIframe");if(R.size()===0){R=i(M);R.css("opacity","0");var Q=H<=w?H:w;if(S.length===0){J.find(".tlThingContent").append(R)}else{if(S.is("div")){S.append(R)}}J.find(".tlThingContent").css("cssText","width:"+Q+"px!important;");R.load(function(){J.addClass("iframeLoaded");R.addClass("loaded");S.css({width:R.css("width"),height:R.css("height")});var T=x.styles;if(!x.styles){T=i("."+C).data("tlStyles")||{}}d.applyNewCustomization(J,T,e.getSourceDomain(x.contentUrl));setTimeout(function(){R.fadeTo(300,1)},300);setTimeout(function(){S.addClass("loaded")},200);R.unbind("load")});if(window.ActiveXObject||"ActiveXObject" in window){R.attr("src",R.attr("src"))}}};O=function(Q,S,R){k(Q,R,x,window.top==window.self)}}else{if(x.theme==="rich"){var n=!e.no(x.icon)?x.icon:"";var E=!e.no(x.title)?x.title:"";if(x.productName){E=x.productName}else{if(!e.no(x.title)){E=x.title}else{E=""}}E='<span class="tlThingTitle">'+E+"</span>";if(!x.productName&&!e.no(x.subTitle)){E='<span class="tlThingSubTitle">'+x.subTitle+"</span><br />"+E}var o="";var K;if(n){K='<div class="tlVideoIconWrapper"><img class="tlThingIcon" src="'+n+'"/></div>'}else{K='<div class="tlThingIcon"></div>'}var B="";if(!e.no(x.site)){B=x.site;if(!e.no(x.siteUrl)){B='<a href="'+x.siteUrl+'">'+B+"</a>"}B='<div class="tlThingFooter">'+B+"</div>"}var m="";if("NONE"===x.openlink){m="defaultCursor"}J=i('<div class="tlThingText" id="'+C+'"><div class="tlThingClose"></div><div class="tlThingContent" style="max-width:'+t+"px!important; max-height:"+y+'px!important">'+o+'<div class="tlNonplayingContent '+D+'"style="max-width:'+t+"px!important; max-height:"+y+'px!important;"><div class="tlThumbnail '+m+'"style="important;max-width:'+t+"px!important; max-height:"+y+'px!important;">'+K+'<div class="tlThumbnailOverlay"></div></div><span class="tlCenteringOuter"><span class="tlCenteringMiddle"><span class="tlCenteringInner '+D+'">'+E+"</span></span></span></div>"+B+'</div><div class="tlArrowWrapper"><div class="tlArrow"></div></div></div>');J.find(".tlThingTitle").on("vmouseup","a",function(S){var R=i(this).attr("href");var Q=window.open(R,"_blank");Q.opener=null;return false});if(x.contentUrl){l=g.prepareAndGetParameters(x.contentUrl);P=l.srcPmParams;I=l.rtid}O=function(Q,W,V){if(V){V()}if(J.hasClass("whitelabel")&&(x.openlink==="AUTO"||x.openlink==="NONE")){return}if(x.contentUrl&&J.find(".tlSpinner").length===0){i(".tlThingClose").not(J.find(".tlThingClose")).mouseup();var R=i(window).width();var X=x.iWidth;var U=x.iHeight;if(X>(R-26)){var T=X/(R-26);X=X/T;U=U/T}var S=i('<iframe class="tlSpinner tlRichIframe" webkitallowfullscreen mozallowfullscreen allowfullscreen scrolling="auto" src="'+x.contentUrl+P+'" style="width:'+X.toString()+"px !important; height:"+U.toString()+'px !important;" frameBorder="0"></iframe>');J.find(".tlThingContent").append(S);J.addClass("tlPlaying tlSticky");p(W);setTimeout(function(){W.closest(".tlImageContainer").addClass("mouseover")},0)}else{J.find(".tlThingClose").mouseup();if(Q.indexOf("http")===0){k(Q,false,x,window.top==window.self)}else{window.location=Q}}}}else{var r=!e.no(x.title)?x.title:"";var N="";if(r!==""){if(x.productName!==""){N+="<br />"}N+='<a class="tlThingLink" href="'+v+'">'+r+"</a>"}u=x.productName;J=i('<div class="tlThingText" id="'+C+'" style="max-width:'+t+"px!important;max-height:"+y+'px!important;""><div class="tlThingClose"></div><div class="tlThingContent '+D+'" style="max-width:'+t+"px!important; max-height:"+y+'px!important;">'+u+N+'</div><div class="tlArrowWrapper"><div class="tlArrow"></div></div></div>');O=function(Q,S,R){k(Q,R,x,window.top==window.self)};c(J,u,t)}}var F="";if(!e.no(x.theme)){F+=" tlTheme"+a(x.theme)+"Thing"}if(!e.no(x.variant)){F+=" tlVariant"+a(x.variant)+"Thing";if(x.variant=="image"&&L&&v.indexOf(b.getBaseUrl()+"/scene/")!=-1){F+=" whitelabel"}}J.addClass(F);var A={rtid:I,clickHandler:O,hoverHandler:z};J.data("bubbledata",A);if(x.audio){J.find(".tlThingContent").append('<audio volume="0.8"'+(x.icon||x.contentUrl?"":" controls ")+' loop src="'+x.audio+'"></audio>')}return J}return{render:f,setBubbleTagTextStyle:c,relocateOrOpen:k}});tlRequire.define("callbackManager",[],function(){var a=(function(){var b={};return{runAfter:function(c,d){if(b[c]&&b[c].length===0){d()}else{if(!b[c]){b[c]=[d]}else{b[c].push(d)}}},triggerEvent:function(c){if(b[c]){while(b[c].length>0){(b[c].shift())()}}else{b[c]=[]}}}}());return a});tlRequire.define("config",["namespace","util"],function(c,d){var a=d.extend({address:"http://www.thinglink.com",sslAddress:"https://www.thinglink.com",videoAddress:"https://video.thinglink.com",sslVideoAddress:"https://video.thinglink.com",staticAddress:"//cdn.thinglink.me",staticSslAddress:"https://cdn.thinglink.me",embedAddress:"//cdn.thinglink.me",cssNonce:"331121124488",clientId:"310115790974091265",fbAppId:"163019823751039",wlFbAppId:"448074751917449",usePromotionBanner:false,minWidth:130,minHeight:130,activateImage:function(l){$tlJQ(l).tlImage("scrollTo")},initAfterLoad:true,showPoweredBy:true,eventManager:false,disableContextMenu:false,fourDotsInfo:true,vOverflow:null,hOverflow:null,referer:undefined,nubbinSneakPeek:true,makeNubbinsSticky:false,makeSidebarSticky:false,extraSidebarIcons:[],preventNavigation:false,disableMenuItems:false,showTouch:true,showShare:true,showFullscreen:true,forceSecure:false,initialNubbinShowDuration:5000,eventCallback:null,language:null,manualViewStats:false,highlightCallback:null,disablePostToChannel:false},c.config);function g(){var o="http://thinglink.local:8080/thinglink",l="https://thinglink.local:8443/thinglink",n="https://localhost:8000",m="https://localhost:8000";if(a.address.charAt(0)=="@"){a.address=o;a.clientId="666666666"}if(a.videoAddress.charAt(0)=="@"){a.videoAddress=n}if(a.sslVideoAddress.charAt(0)=="@"){a.sslVideoAddress=m}if(a.sslAddress.charAt(0)=="@"){a.sslAddress=l}if(a.embedAddress.charAt(0)=="@"){a.embedAddress=o}if(a.staticAddress.charAt(0)=="@"){a.staticAddress=o}if(a.staticSslAddress.charAt(0)=="@"){a.staticSslAddress=l}if(a.staticAddress.charAt(0)=="/"){a.staticAddress=d.getProtocol()+a.staticAddress}if(a.cssNonce.toString().charAt(0)=="@"){a.cssNonce=Math.round(Math.random()*Math.pow(10,8))}}g();if(window.location.search.indexOf("thinglinkLocal")!==-1){var k="www.thinglink.com";a.address="http://"+k;a.sslAddress="https://"+k}function e(){return("https:"==document.location.protocol)?a.sslAddress:a.address}function i(){return a.sslAddress}function j(){return("https:"==document.location.protocol)?a.sslVideoAddress:a.videoAddress}function f(){return("https:"==document.location.protocol)?a.staticSslAddress:a.staticAddress}function h(){var p=e();var n=window.top!==window;var o=/thinglink\.(com|local)/.test(document.referrer);if(n&&!o){return false}var m=window.location.href;return m.indexOf(p)!=-1}function b(l){if(!a.language&&l){a.language=l}}a.getCDNUrl=f;a.getBaseUrl=e;a.getApiBaseUrl=i;a.getBaseVideoUrl=j;a.isThinglinkSite=h;a.setRequestLanguage=b;c.config=a;return a});tlRequire.define("cssInjector",["jQuery","config"],function(c,a){function b(i,f,g){var h="";if(g){h=' media="screen"'}if(c("head").has("#"+i).length===0){var e=c('<link id="'+i+'" type="text/css" rel="stylesheet" href="'+f+'"'+h+"></link>").appendTo(c("head"));if(typeof(document.addEventListener)==="undefined"){e.attr({href:f,rel:"stylesheet",type:"text/css",id:i})}}}function d(){if(!document.getElementById("tlInjectedCss")){b("tlInjectedCss",a.getCDNUrl()+"/jsec/"+a.cssNonce+"/embed.css");if(typeof(document.addEventListener)==="undefined"){b("tlInjectedIeCss",a.getCDNUrl()+"/jsec/"+a.cssNonce+"/embed-ie.css")}}}return{injectEmbedCSS:d,addExternalCss:b}});tlRequire.define("cssUtil",["jQuery","util"],function(d,a){function c(h,k,j){var e={};if(!h){return e}var g=h.split(";"),n,p,o,l,f;for(n=0;n<g.length&&(g[n]!==false);n++){l=g[n].match(/^ *([^: ]+) *: *(.*)$/);if(l){p=l[1];if(k){f=l[2].match(/^([\d.]+) *(?:px *(?:! *important)? *)?$/i);if(f){o=f[1]}}if((k&&!f)||!k){o=d.trim(l[2]);if(k||j){o=o.replace(/! *important/i,"")}}p=p.toLowerCase();e[p]=o}}return e}function b(g,f){var e=c(f.style.cssText,false,true);e.top=g.t+"px";e.left=g.l+"px";if(!a.isSVG(g.w,g.h)){e.width=g.w+"px";e.height=g.h+"px"}f.style.cssText=a.mapToCssText(e,true)}return{parseCssText:c,repositionElement:b}});tlRequire.define("customization",["namespace","util","config","jQuery"],function(d,h,c,k){if(!window.location.origin){window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function j(){return{bubble:{backgroundColor:"inherit",foregroundColor:"inherit"},font:{size:"inherit",family:"inherit",source:"default"}}}function a(o){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var n=parseFloat(RegExp.$1);if(n<=9){o=JSON.stringify(o)}}return o}function b(q,o,n){if(typeof n==="undefined"||n=="undefined"){n=window.location.origin}else{n=decodeURIComponent(n)}if(q.length>0&&q.hasClass("loaded")){try{o=a(o);q[0].contentWindow.postMessage(o,n)}catch(p){console.log("failed to send parcel")}}}function m(n){var p=d.customization.googleFonts||[],o;for(o=p.length-1;o>=0;o--){if(p[o]===n){return true}}return false}function i(n,q){var p;if(document.getElementById("webfontScript")==null){p=document.createElement("script");var r=document.scripts[0];p.id="webfontScript";p.src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js";r.parentNode.insertBefore(p,r)}else{p=document.getElementById("webfontScript")}function t(){WebFont.load({google:{families:[n+":400,400i,700,700i"]}})}if(k(p).hasClass("script-loaded")){var o=n.toLowerCase().replace(/ /g,"");if(!k("html").hasClass("wf-"+o+"-n4-loading")&&!k("html").hasClass("wf-"+o+"-n4-active")){t()}}else{p.onload=function(){k(this).addClass("script-loaded");t()}}}function l(q,p,o){var n=q||{};n.description=p||{};n.properties=o||{};return n}function g(p,o,n){e(p,o,n,false);b(p.find("iframe"),o,n)}function e(q,p,o,r){if(typeof(window.addEventListener)==="undefined"){return}if(typeof(r)==="undefined"){r=true}var u={};var t={};p=h.extend(j(),p);if(p.bubble){if(p.bubble.backgroundColor!="inherit"){u["background-color"]=p.bubble.backgroundColor}else{u["background-color"]="#ffffff"}if(p.bubble.foregroundColor!="inherit"){u.color=p.bubble.foregroundColor;t.color=p.bubble.foregroundColor}else{u.color="#000000";t.color="#000000"}}if(p.font){if(p.font.size!="inherit"){u["font-size"]=p.font.size+"px";t["font-size"]=p.font.size+"px"}else{u["font-size"]="";t["font-size"]=""}if(p.font.family!="inherit"){if(p.font.source==="google"||(typeof(p.font.source)==="undefined"&&m(p.font.family))){i(p.font.family,q)}u["font-family"]=p.font.family+", sans-serif";t["font-family"]=p.font.family+", sans-serif"}else{u["font-family"]="inherit";t["font-family"]="inherit"}}var n=q.find(".tlUpArrow");if(n.length>0){n.css("cssText",n[0].style.cssText+" border-bottom-color: "+u["background-color"]+" !important;")}var s=q.find(".tlArrow");if(s.length>0){s.css("cssText",s[0].style.cssText+" border-top-color: "+u["background-color"]+" !important;")}q.find(".tlThingContent, .tlIframeDescription").css(u);q.find(".tlThingContent span,.tlThingContent .tlThingFooter").each(function(x,v){var w=k(v);if(w.attr("style")&&!w.hasClass("tlThingFooter")){t["font-size"]=w.css("font-size")}else{if(w.hasClass("tlThingFooter")){t["font-size"]="9"}}w.attr("style",h.mapToCssText(t,true))});q.find(".tlThingContent, .tlIframeDescription").find("h3").css({color:"inherit"});q.find(".tlThingContent, .tlIframeDescription").find("b, i, strong, i a, b a, strong a, p").css({"font-size":"inherit",color:"inherit"});if(r){b(q.find("iframe"),p,o)}}var f=h.extend({defaultCustomStyles:j,applyNewCustomization:g,sendParcelToIframe:b,mergeParcelData:l},d.customization);d.customization=f;return d.customization});tlRequire.define("editor",["jQuery","namespace","sceneUtil","EventDispatcher","config","util","postMessageManager"],function(n,g,h,e,f,i,m){function b(t){if(n("#thinglinkColorbox").length===0){n.thinglinkColorbox.init()}var r=n(window).width();var u=n(window).height();var o=r;var q=u;var s=n.thinglinkColorbox({iframe:true,open:false,transition:"none",width:o,height:q,opacity:0.6,overlayClose:false,scrolling:false,onOpen:function(){n("html").css({overflow:"hidden"})},onComplete:function(){var w=n("#thinglinkColorbox").offset().top,v=(n(window).height()-q)/2,x=n(window).scrollTop();if(w>n(window).height()+n(window).scrollTop()){n("#thinglinkColorbox").css({top:x+v})}},onCleanup:function(){n("html").css({overflow:""});a.trigger("editorClose",t)},href:function(){return l(t)}});var p=n("#thinglinkCBLoadedContent iframe");if(typeof(window.InstallTrigger)!=="undefined"){p.css("display","block")}p.load(function(){p.css("background-color","transparent");p.css("height",q+"px")})}function l(p){var o=h.getSceneUrl(p),u=f.getApiBaseUrl(),w=p.attr("tl-type");if(p.attr("tl-media-360")=="true"){var q=p.attr("tl-video-id");return f.getBaseUrl()+"/media/"+q+"/editor"}if(w=="video"){var t=p.attr("tl-video-id");return f.getBaseVideoUrl()+"/videos/"+t+"/editor"}var v=p.attr("tl-scene-id");if(!v){v="url="+o;if(!i.no(window.__tlid)){v+="&massId="+window.__tlid}}else{v="itemId="+v}var s=m.prepareAndGetParameters(u+"/embed/editor").srcPmParams;var r;if(f.isThinglinkSite()){r="thinglink_site"}else{r="embedded_image"}var x=Math.floor(Math.random()*10000000);return u+"/embed/editor?x="+x+"&embed=true&"+v+"&activityOrigin="+r+s}function k(r,p){var o=l(r);if(p){g.editorPopup=p;p.location.href=o}else{var x=screen.width*0.9;var t=screen.height*0.9;var v=x;var s=t;var q=(x/2)-(v/2);var u=(t/2)-(s/2);g.editorPopup=window.open(o,"editor","status=0,statusbar=0,toolbar=0,location=0,menubar=0,directories=0,resizable=1,height="+s+",width="+v+",left="+q+",top="+u)}}function d(q,p){if(p){try{p.close()}catch(o){}}if(n("#thinglinkColorBoxScript").length===0){n.getScript(f.getCDNUrl()+"/jsec/"+f.cssNonce+"/jquery.colorbox.js",function(){if(q){q()}});g.addExternalCss("tlInjectedColorboxCss",f.getCDNUrl()+"/jsec/"+f.cssNonce+"/colorbox.css",true)}else{if(q){q()}}}function c(p,s,r,q){h.closeAllStickyTags();if(h.isThinglinkSceneView()&&!s){s=function(){window.location.reload()}}g.editorCloseCallback=s;if(!q&&(window.innerWidth<1025||window.innerHeight<585)){k(n(p),r)}else{if(r){try{r.close()}catch(o){}}d(function(){b(n(p))},r)}}var j=function(){};j.prototype=new e();j.prototype.open=c;var a=new j();return a});tlRequire.define("errorReporter",["namespace","config","jQuery"],function(e,d,f){var a=5;var c=0;var b=window.onerror;window.onerror=function(j,h,g){if(h.indexOf("embed.js")===-1){return}if(b){b(j,h,g)}c+=1;if(c>=a){return}var i=d.getApiBaseUrl();var k={errorMessage:j,file:h,lineNumber:g};f.ajax({url:i+"/api/internal/reportJsError",data:k,dataType:"jsonp"})};return{}});tlRequire.define("eventCallback",["config"],function(a){function b(e,f){var c;if(e.length>0){c=e.tlImage("sceneData");var d=c.permissions;if(a.eventCallback&&typeof(d)!="undefined"&&d.indexOf("cpm")>=0){f.image=e[0];f.timestamp=(new Date()).getTime();a.eventCallback(f)}}}return b});tlRequire.define("eventDebounce",[],function(){var a=function(f){var e,d=[],g={},b=function(h){if(f.after){f.after.call(h,d,g)}d=[];e=null;g={}};return function c(k){var j=this,i=k.type;var h=(typeof k.originalEvent==="undefined")?k.type:k.originalEvent.type;g.lastOrigEventType=h;if(e){clearTimeout(e)}else{if(f.before){f.before.call(j,i,g)}}if(f.everyTime){f.everyTime.call(j,i,g,k)}d.push(i);e=setTimeout(function(){b(j)},f.threshold||100);if(f.allowPropagation){return true}else{return false}}};return a});tlRequire.define("fourDotsButton",["config","postMessageManager","animUtil","txt","actionLogger","abTest"],function(d,i,k,f,l,e){var h=false,j=Math.random()<0.001;function c(){return d.getBaseUrl()+"?buttonSource=badgeButtonBox"}function b(m,n,o){if((m.find(".tlFourDotsButton").length===0)&&(m.find(".tlFourDotsBanner").length===0)){return}a(m)}function a(r){r.find(".tlFourDotsButton").remove();r.find(".tlFourDotsBanner").remove();var p=null;var s=r.width();var v=300,n=300;if(d.usePromotionBanner&&r.width()>=v&&r.height()>=n){e.addBucket("bannerType",0,99,"virtualStoreBanner");var q=e.variantForUser("bannerType");var m,o,w,u;if(q==="vrAppBanner"){m="banner-virtualLessons-300.png",o="banner300",w=106,u=250;if(s>=800){m="banner-virtualLessons-800.png";o="banner800";w=50;u=764}p=$tlJQ('<div class="tlFourDotsBanner tlBottomWideBanner"><div class="backgroundRect"></div><div class="bannerImageAreaWrapper"><img style="width:'+u+"px!important; height:"+w+'px!important;" class="bannerImage" src="'+d.getBaseUrl()+"/gfx/banners/"+m+'"><a class="homeLink '+o+'" href="'+d.getBaseUrl()+'?buttonSource=badgeButtonVirtualStore" target="_blank"><a class="promotedLink '+o+'" href="https://itunes.apple.com/us/app/vr-lessons-by-thinglink/id1096042510?ls=1&mt=8" target=_blank></a></div></div>')}else{m="banner-virtualStoreBanner-300.png";o="banner300";w=106;u=250;if(s>=800){m="banner-virtualStoreBanner-800.png";o="banner800";w=50;u=764}p=$tlJQ('<div class="tlFourDotsBanner tlBottomWideBanner"><div class="backgroundRect"></div><div class="bannerImageAreaWrapper"><img style="width:'+u+"px!important; height:"+w+'px!important;" class="bannerImage" src="'+d.getBaseUrl()+"/gfx/banners/"+m+'"><a class="homeLink '+o+'" href="'+d.getBaseUrl()+'?buttonSource=badgeButtonVirtualStore" target="_blank"><a class="promotedLink '+o+'" href="http://demo.thinglink.com/vr-store" target=_blank></a></div></div>')}if(j){var t=l.calcABTestString(r);p.find(".homeLink").unbind("vclick").bind("vclick",function(){l.logActivity({name:"clicked home banner",sceneId:r.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:d.isThinglinkSite(),ABTests:t},true)});p.find(".promotedLink").unbind("vclick").bind("vclick",function(){l.logActivity({name:"clicked promoted banner",sceneId:r.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:d.isThinglinkSite(),ABTests:t},true)});if(!h){h=true;l.logActivity({name:"showed promotion banner",sceneId:r.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:d.isThinglinkSite(),ABTests:t},true)}}}else{p=$tlJQ('<div class="tlFourDotsButton"><div id="intro">'+f("FourDotsButton.MadeWithOrMakeYourOwn")+'</div><div id="logo"></div><a class="btn" href="'+c()+'" target="_blank"><span class="btnMessageShort">'+f("FourDotsButton.LearnMore")+'</span></a><div class="arrowRight"></div></div>')}p.appendTo(r);p.find("#logo").on("click",function(){window.open(c(),"_blank");return false})}function g(m,n){if(n.indicator){return}a(m);b(m)}return{setup:g,reposition:b}});tlRequire.define("globalCache",["jQuery"],function(d){var e=d();function b(f){e=e.add(f)}function a(){return e}function c(){e=d()}return{addQueriedImage:b,getQueriedImages:a,clear:c}});tlRequire.define("hashing",[],function(){function b(c){return Math.abs(a(c.src)).toString(16)}function a(f){var g=65521;var d=1,c=0;var e;for(e=0;e<f.length;++e){d=(d+f.charAt(e).charCodeAt())%g;c=(c+d)%g}return(c<<16)|d}return{adler32:a,generateImageHash:b}});tlRequire.define("imageEventHandlers",["jQuery","callbackManager","config","eventDebounce","jUtil","animUtil","actionLogger","util"],function(n,f,c,i,g,k,m,e){var d=false;var b=function(p){p.data("entertime",(new Date()).getTime());if(!d){n(window).blur(function(){n(".tlImageContainer").each(function(){m.logHoverTime(n(this))});return true});d=true}};var h="div.nubbin, .tlFirstseen, .tlSidebar";var o=function(q){if(!q.hasClass("tlHover")){b(q);q.addClass("tlHover");var p=q.find(h);k.variateOpacity("show",p)}},l=function(){return(c.makeSidebarSticky?"":".tlSidebar, ")+".tlFirstseen"+(c.makeNubbinsSticky?"":", div.nubbin.unpinned, div.nubbin .nubbinGlow")},j=function(p){setTimeout(function(){var q=n("#tlTagContainer div.tlThingText.mouseover");if(!p.hasClass("mouseover")&&q.length===0){p.removeClass("tlHover");m.logHoverTime(p);k.variateOpacity("hide",p.find(l()))}},30)};function a(p){p.removeClass("tlHover");p.find(l()).hide();var q=function(){if(!p.hasClass("mouseover")){p.addClass("mouseover")}setTimeout(function(){n("#tlTagContainer").children("div.tlThingText").mouseleave();o(p)},0)};p.unbind("mouseenter vclick").bind("mouseenter vclick",i({before:q,threshold:50,allowPropagation:true}));p.unbind("mouseleave").bind("mouseleave",function(){p.removeClass("mouseover");n("#tlTagContainer").children("div.tlThingText").removeClass("mouseover");j(p)});g.checkImageInViewport(p,function(){p.unbind("mousemove.temp").bind("mousemove.temp",function(){q();p.unbind("mousemove.temp")})})}f.runAfter("initcomplete",function(){if(e.isTouchDevice){n(document).unbind("touchstart.tlNubbinHide").bind("touchstart.tlNubbinHide",function(q){var p=q.target||q.srcElement;if(n(p).closest(".tlImageContainer").length>0||n(p).closest("#tlTagContainer").length>0){return}var r=new Date().getTime();n(document).unbind("touchend.tlNubbinHide").bind("touchend.tlNubbinHide",function(){n(this).unbind("touchend.tlNubbinHide");var s=new Date().getTime()-r;if(s>200){return}n(".tlImageContainer.tlHover").each(function(){n(this).trigger("mouseleave")})})})}});return{attach:a,showNubbins:o,hideNubbins:j}});tlRequire.define("init",["namespace","util","config","sceneCache","statusManager"],function(c,a,b,e,d){if(window.console===undefined){window.console={log:function(){},warn:function(){},error:function(){}}}(function(){c.init=function(){if(!document.addEventListener){return}var j=document.getElementsByTagName("script"),g,m=j.length,i;while(m>0){m--;i=j[m].getAttribute("src");if(i&&(i.indexOf(".thinglink.com")!=-1||i.indexOf(".thinglink.me")!=-1||i.indexOf("thinglink.local")!=-1||(b.isThinglinkSite()&&(i.indexOf("embed")!=-1)))){g=j[m];break}}var o;if(g){var n=g.getAttribute("tl-script-loaded");if(a.no(n)||n==="null"||n===null){o=g.src.replace(/^[^\#]+\#?/,"");g.setAttribute("tl-script-loaded",true)}}if(o){if(/^\d+$/.test(o)){var l=document.getElementsByTagName("img");var k=l[l.length-1];k.setAttribute("tl-scene-id",o);e.setCacheSceneId(k.src,o)}else{var p=g.getAttribute("height",2);var h=g.getAttribute("width",2);if(a.no(p)||p==="null"||p===null){p=null}if(a.no(h)||h==="null"||h===null){h=null}f(o,p,h,g)}}if(a.browserIsUnsupported()){return}};function f(k,g,j,m){var h=a.extractSceneId(k);var l=document.createElement("img");l.src=a.extractUrl(k);if(h.length>0&&h!=="0"){l.setAttribute("tl-scene-id",h)}var i={};if(g!==null){i.height=g}else{i["max-height"]=window.innerHeight+"px"}if(j!==null){i.width=j}else{i["max-width"]="100%"}l.style.cssText=a.mapToCssText(i,true);m.parentNode.insertBefore(l,m)}d.setStatus("loadcomplete")}());if(c.config.initAfterLoad){c.init()}return c.init});tlRequire.defineAsync("jQuery",["init","util","statusManager"],function(e,b,c,a){if(b.browserIsUnsupported()){return}var d=(function(){var f;function i(k){var o="thinglinkJQueryScript";if(!window.__thinglinkInitStarted){window.__thinglinkInitStarted=true;if(window.$tlJQ){k()}else{var l=document.createElement("script");l.type="text/javascript";l.id=o;var n=function(){window.$tlJQ=jQuery.noConflict(true);k()};if(l.addEventListener){l.addEventListener("load",n,false)}else{l.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){n()}}}l.setAttribute("src",b.getProtocol()+"//cdn.thinglink.me/js/ext/jquery.min.js");var m=document.getElementsByTagName("head")[0];m.appendChild(l)}}}function j(k){if(f){f()}if(document.readyState==="interactive"){k()}else{if(typeof(document.documentElement.style.WebkitAppearance)!=="undefined"&&document.readyState==="loaded"){k()}else{$tlJQ(document).ready(k)}}}function h(k){i(function(){j(k)})}function g(k){f=k}return{loadJQuery:h,initCallback:g}}());d.initCallback(function(){c.setStatus("initcomplete")});d.loadJQuery(function(){c.setStatus("jqueryready");a(true,window.$tlJQ)})});tlRequire.define("jQueryPostMessage",["jQuery"],function(b){
/*!
     * jQuery postMessage - v0.5 - 9/11/2009
     * http://benalman.com/projects/jquery-postmessage-plugin/
     *
     * Copyright (c) 2009 "Cowboy" Ben Alman
     * Dual licensed under the MIT and GPL licenses.
     * http://benalman.com/about/license/
     */
;var a=function(k){var d,e,l=1,c,h=this,i="postMessage",f="addEventListener",g,j=h[i];k[i]=function(m,o,n){if(!o){return}m=typeof m==="string"?m:k.param(m);n=n||parent;if(j){n[i](m,o.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))}else{if(o){n.location=o.replace(/#.*$/,"")+"#"+(+new Date())+(l++)+"&"+m}}};k.receiveMessage=g=function(o,n,m){if(j){if(o){if(typeof c==="function"&&c()){g()}c=function(p){if((typeof n==="string"&&p.origin!==n)||(k.isFunction(n)&&n(p.origin)===false)){return false}o(p)}}if(h[f]){h[o?f:"removeEventListener"]("message",c,false)}else{h[o?"attachEvent":"detachEvent"]("onmessage",c)}}else{if(d){clearInterval(d)}d=null;if(o){m=typeof n==="number"?n:typeof m==="number"?m:100;d=setInterval(function(){var q=document.location.hash,p=/^#?\d+&/;if(q!==e&&p.test(q)){e=q;o({data:q.replace(p,"")});document.location.hash=""}},m)}}}};a(b);return b.postMessage});tlRequire.define("jQueryTlImage",["jQuery","adMatcher","config","globalCache"],function(d,a,c,e){function b(){var h=/^data:/;var g=/^https?:\/\/mt\d+\.google\.com\//;var f={sceneData:function(i){if(!i){return this.data("scene")}else{this.data("scene",i)}},hasSize:function(){if(this.tlImage("isLoaded")){return true}else{var m=(this.height()!==0)&&(this.width()!==0);var l=!(this.height()===24&&this.width()===24);var k=!(this.height()===0&&this.width()===0);var j=!(this.height()===1&&this.width()===1);var i=!(document.body.attachEvent&&window.ActiveXObject&&this.width()===28&&this.height()===30);return m&&l&&i&&k&&j}},isLoaded:function(){return(this[0].complete||this[0].readyState===4)},isInspectedByThinglink:function(){return e.getQueriedImages().is(this)||this.hasClass("thinglinkImage")||this.hasClass("thinglinkFiltered")},isWhitelabel:function(){var i=this.tlImage("sceneData");return i!==undefined&&i.branding!==undefined&&i.branding!=="thinglink"},hasThinglinkBadge:function(){var i=this.tlImage("sceneData");return i.indicator===undefined},isAlwaysThinglink:function(){var i=this;return i.hasClass("alwaysThinglink")},isOk:function(){var k=this;if(k.tlImage("isAlwaysThinglink")){return true}if(k.closest(".neverThinglink").length){return false}if(k.css("display")=="none"){return false}var j=k.attr("src");if(a.test(j)||h.test(j)||g.test(j)){return false}var l=["#lightboxImage","#lightbox-image",".cboxPhoto","#fancybox-img",".fancybox-image"];var i=false;d.each(l,function(m,n){if(k.is(n)){i=true;return false}});if(i){return false}if(!k.tlImage("hasSize")){return true}if(window.screen&&(screen.width<=480)){return(k.width()>screen.width/3)&&(k.height()>screen.width/3)}return(k.height()>=c.minHeight&&k.width()>=c.minWidth)},scrollTo:function(){var k=this;var j;if(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0){j=d("body")}else{j=d("html,body")}var i=j.scrollTop();d(window).load(function(){var l=k.offset().top-40;if(Math.abs(j.scrollTop()-i)<50){j.stop().animate({scrollTop:l},"fast")}})}};d.fn.tlImage=function(i){return f[i].apply(this,Array.prototype.slice.call(arguments,1))}}b();return d.fn.tlImage});tlRequire.define("jQueryVMouse",["jQuery"],function(a){if(a.vmouse){return a.vmouse}function b(y,H,g){var G="virtualMouseBindings",d="virtualTouchID",c=["vmouseover","vmousedown","vmousemove","vmouseup","vclick","vmouseout","vmousecancel"],x=["clientX","clientY","pageX","pageY","screenX","screenY"],D=y.event.mouseHooks?y.event.mouseHooks.props:[],z=y.event.props.concat(D),B={},I=0,t=0,s=0,q=false,L=[],j=false,S=false,v=(g.addEventListener),u=y(g),F=1,O=0,e;y.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};function r(i){while(i&&typeof i.originalEvent!=="undefined"){i=i.originalEvent}return i}function k(U,V){var ad=U.type,ae,ac,W,T,aa,Z,Y,X,ab;U=y.Event(U);U.type=V;ae=U.originalEvent;ac=y.event.props;if(ad.search(/^(mouse|click)/)>-1){ac=z}if(ae){for(Y=ac.length,T;Y;Y){T=ac[--Y];U[T]=ae[T]}}if(ad.search(/mouse(down|up)|click/)>-1&&!U.which){U.which=1}if(ad.search(/^touch/)!==-1){W=r(ae);ad=W.touches;aa=W.changedTouches;Z=(ad&&ad.length)?ad[0]:((aa&&aa.length)?aa[0]:undefined);if(Z){for(X=0,ab=x.length;X<ab;X++){T=x[X];U[T]=Z[T]}}}return U}function Q(V){var T={},i,U;while(V){i=y.data(V,G);for(U in i){if(i.hasOwnProperty(U)){if(i[U]){T[U]=T.hasVirtualBinding=true}}}V=V.parentNode}return T}function C(U,T){var i;while(U){i=y.data(U,G);if(i&&(!T||i[T])){return U}U=U.parentNode}return null}function K(){S=false}function m(){S=true}function R(){O=0;L.length=0;j=false;m()}function p(){K()}function w(){A();I=setTimeout(function(){I=0;R()},y.vmouse.resetTimerDuration)}function A(){if(I){clearTimeout(I);I=0}}function o(U,V,i){var T;if((i&&i[U])||(!i&&C(V.target,U))){T=k(V,U);y(V.target).trigger(T)}return T}function l(T){var U=y.data(T.target,d);if(!j&&(!O||O!==U)){var i=o("v"+T.type,T);if(i){if(i.isDefaultPrevented()){T.preventDefault()}if(i.isPropagationStopped()){T.stopPropagation()}if(i.isImmediatePropagationStopped()){T.stopImmediatePropagation()}}}}function P(U){var W=r(U).touches,V,i;if(W&&W.length===1){V=U.target;i=Q(V);if(i.hasVirtualBinding){O=F++;y.data(V,d,O);A();p();q=false;var T=r(U).touches[0];t=T.pageX;s=T.pageY;o("vmouseover",U,i);o("vmousedown",U,i)}}}function J(i){if(S){return}if(!q){o("vmousecancel",i,Q(i.target))}q=true;w()}function f(W){if(S){return}var U=r(W).touches[0],T=q,V=y.vmouse.moveDistanceThreshold,i=Q(W.target);q=q||(Math.abs(U.pageX-t)>V||Math.abs(U.pageY-s)>V);if(q&&!T){o("vmousecancel",W,i)}o("vmousemove",W,i);w()}function h(V){if(S){return}m();var i=Q(V.target),U;o("vmouseup",V,i);if(!q){var T=o("vclick",V,i);if(T&&T.isDefaultPrevented()){U=r(V).changedTouches[0];L.push({touchID:O,x:U.clientX,y:U.clientY});j=true}}o("vmouseout",V,i);q=false;w()}function E(T){var U=y.data(T,G),i;if(U){for(i in U){if(U.hasOwnProperty(i)){if(U[i]){return true}}}}return false}function N(){}function n(i){var T=i.substr(1);return{setup:function(V,U){if(!E(this)){y.data(this,G,{})}var W=y.data(this,G);W[i]=true;B[i]=(B[i]||0)+1;if(B[i]===1){u.bind(T,l)}y(this).bind(T,N);if(v){B.touchstart=(B.touchstart||0)+1;if(B.touchstart===1){u.bind("touchstart",P).bind("touchend",h).bind("touchmove",f).bind("scroll",J)}}},teardown:function(V,U){--B[i];if(!B[i]){u.unbind(T,l)}if(v){--B.touchstart;if(!B.touchstart){u.unbind("touchstart",P).unbind("touchmove",f).unbind("touchend",h).unbind("scroll",J)}}var W=y(this),X=y.data(this,G);if(X){X[i]=false}W.unbind(T,N);if(!E(this)){W.removeData(G)}}}}var M;for(M=0;M<c.length;M++){y.event.special[c[M]]=n(c[M])}if(v){g.addEventListener("click",function(X){var U=L.length,Y=X.target,aa,Z,ab,W,T,V;if(U){aa=X.clientX;Z=X.clientY;e=y.vmouse.clickDistanceThreshold;ab=Y;while(ab){for(W=0;W<U;W++){T=L[W];V=0;if((ab===Y&&Math.abs(T.x-aa)<e&&Math.abs(T.y-Z)<e)||y.data(ab,d)===T.touchID){X.preventDefault();X.stopPropagation();return}}ab=ab.parentNode}}},true)}}b(a,window,document);return a.vmouse});tlRequire.define("jUtil",["jQuery"],function(c){function a(h,e){var f=c(window);var j=f.scrollLeft(),d=f.scrollTop(),k=h.offset(),g=k.left,i=k.top;if(i+h.height()>d+5&&i<d+f.height()-5&&g+h.width()>j+5&&g<j+f.width()-5){e()}}function b(f){var g=c(f);var h,e;var d;if(g.hasClass("tlThingText")){e=g;d=e.attr("id").match(/tl-a-([0-9]+)/)[1];h=c(".tagx.tl-a-"+d)}else{h=g;d=g.attr("tl-thing-id");e=c("#tl-a-"+d)}return{nubbin:h,bubble:e}}return{checkImageInViewport:a,getThingPieces:b}});tlRequire.define("main",["namespace","callbackManager","statusManager","jQuery","util","config","cssUtil","tagFetcher","measure","txt","nubbinIconSizeManager","nodeChangeTracker","actionLogger","nubbinRenderer","eventCallback","postMessageManager","sceneUtil","sceneCache","touchManager","hashing","animUtil","fourDotsButton","editor","sharePopup","bubbleRenderer","cssInjector","jUtil","imageEventHandlers","positionThing","tagEventHandlers","eventDebounce","abTest","errorReporter","globalCache","customization","gdprUtils"],function(E,w,k,i,f,B,e,t,h,d,g,F,m,A,J,I,c,o,s,q,l,z,a,u,C,H,b,y,x,D,r,j,G,p,n,v){(function(){var ae=["Edit","Touch","Share"];var ac=["Touch","Share","Fullscreen"];var X=[];if(B.disableEditorButton){ae.splice(0,1)}function R(aH,aM){aM=aM||["imgHash","scriptHash","imgAttr"];var aG=null,aL=null;if(i.inArray("imgAttr",aM)!==-1){aG=aH.attr("tl-scene-id");aL=aH.attr("tl-passkey")}if(!aG&&i.inArray("scriptHash",aM)!==-1){var aK=aH.next().filter("script").attr("src");if(!aK){aK=aH.closest(".tlImageContainer").nextUntil().filter("script").first().attr("src")}if(!!aK&&aK.indexOf("thinglink.")!==-1){aG=aK.replace(/^[^\#]+\#?/,"")}}if(!aG&&i.inArray("imgHash",aM)!==-1){var aI=aH.attr("src");if(!!aI){var aF=aI?aI.match(/^[^\#]+\#tl-([^;]+);(.*)?$/):null;if(!!aF){var aJ=aI.match(/[\?&]tlpasskey=(\w+)/);aG=aF[1];aL=!!aJ?aJ[1]:null}}}return{id:aG,passkey:aL}}function N(aJ,aR,aG){var aK,aO,aP;if(aR){aJ.addClass("thinglinkImage");aJ.removeClass("thinglinkFiltered");if(B.extraSidebarIcons.indexOf("Fullscreen")===-1){B.extraSidebarIcons.push("Fullscreen")}aP=[].concat(ae).concat(B.extraSidebarIcons);if(!B.showTouch){aO=aP.indexOf("Touch");if(aO!==-1){aP.splice(aO,1)}}if(!B.showShare){aK=aP.indexOf("Share");if(aK!==-1){aP.splice(aK,1)}}if(!B.showFullscreen){var aH=aP.indexOf("Fullscreen");if(aH!==-1){aP.splice(aH,1)}}if(aJ.parents(".tlImageContainer").length===0){var aF='<div class="tlSidebar">',aM,aI="";var aL=f.isTouchDevice?"":"tlNonTouchDevice";var aQ='<span class="tlMenuItem tlMenuItem:curLabel :touchClass"><a class="tlMenuIcon tlMenu:curLabel" href="#"></a><span class="tlMenuLabel tlMenuLabel:curLabel">:labelText</span></span>';for(aM=0;aM<aP.length;aM++){aF+=aQ.replace(/:curLabel/gi,aP[aM]).replace(":touchClass",aL).replace(":labelText",d("Sidebar."+aP[aM]))}aF+="</div>";aJ.wrap('<div class="tlImageContainer">');aJ.parent().append('<div class="tlMenuContainer"><span class="tlMenu"></span></div>'+aF+"</div>")}else{i(".tlSidebar .tlMenuItem").show()}}else{aJ.addClass("thinglinkFiltered");aJ.removeClass("thinglinkImage")}var aN=aJ.parents(".tlImageContainer");if(aG){aN.addClass("tlNoTags")}else{aN.removeClass("tlNoTags")}}function au(aG){var aH=[];var aF=[];i("img").each(function(){var aK=i(this);var aI=R(aK,["imgHash"]);var aJ=aI.id;if(aJ){aK.attr("tl-scene-id",aJ)}if(aK.tlImage("isOk")){if(!aK.tlImage("isInspectedByThinglink")){var aM=aK.attr("tl-scene-id");var aL=aK.attr("tl-passkey")||aI.passkey;if((!aM||aM.charAt(0)=="$")&&window.__tlid){aM=c.getSceneUrl(this)}if(aM){p.addQueriedImage(aK);if(i.inArray(aM,aH)===-1){aH.push(aM);if(aL){aF.push(aL)}}}}}else{N(aK,false)}});if(aH.length>0){t.fetchTags(aH,aF,aG);H.injectEmbedCSS()}}E.rebuild=function(aG){if(!aG){i("img.thinglinkFiltered").removeClass("thinglinkFiltered");i("img.thinglinkImage").removeClass("thinglinkImage");p.clear();au(true)}else{var aF=f.extractSceneId(aG),aH=[];if(aF!==""&&aF.charAt(0)!=="$"){aH=i("img[tl-scene-id="+aF+"]")}t.finalFetchCompleteCallback(function(){var aI;for(aI=0;aI<aH.length;aI++){E.reposition(i(aH[aI]))}k.setStatus("tagfetchcomplete")});p.addQueriedImage(aH);t.fetchTags(aG,null,true);H.injectEmbedCSS()}};function aj(aL){if(!window.addEventListener){return false}var aK=getComputedStyle(aL[0],null);if(aK.getPropertyValue("margin-left")!=="0px"||aK.getPropertyValue("left")!=="auto"||aK.getPropertyValue("right")!=="auto"||aK.getPropertyValue("float")==="left"||aK.getPropertyValue("float")==="right"){return false}var aG=aL.closest(".tlImageContainer").parent(),aF=getComputedStyle(aG[0]),aI=aL[0].getBoundingClientRect(),aH=aG[0].getBoundingClientRect();var aJ=aI.left-aH.left-parseInt(aF.getPropertyValue("border-left-width"),10)-parseInt(aF.getPropertyValue("padding-left"),10)-parseInt(aK.getPropertyValue("margin-left"),10);return aJ>0}function ad(aL,aG,aI,aM){var aH=aG[0].style.cssText;aG.data("tlOriginalCss",aH);var aJ=e.parseCssText(aH,false,true),aF={};aF=f.extend(aF,aI);aF.width=aI.rawWidth+"px";aF.height=aI.rawHeight+"px";aJ.padding="0";aJ.border="0";aJ.margin="0";aF["z-index"]=(aM-1);if(aG.css("display")=="block"){aF.display="block";aL.css("display","block");if(aj(aG)){aF["margin-left"]="auto";aF["margin-right"]="auto"}}var aK=aG.css("position");if(aK==="absolute"||aK==="relative"){aF.position=aK;aF.top=aI.top;aF.right=aI.right;aF.bottom=aI.bottom;aF.left=aI.left;aJ.position="static";if(aK==="absolute"){aF["z-index"]=aM}}var aN=aG.css("float");if(aN==="left"||aN==="right"){aF["float"]=aN;delete aJ["float"]}if(aJ["max-width"]&&aJ["max-width"]!="none"){aF["max-width"]=aJ["max-width"];aJ["max-width"]="100%"}aJ.width="100%";aJ.height="100%";aG.css({cssText:f.mapToCssText(aJ,true)});aL.css({cssText:f.mapToCssText(aF,true,true)});var aO=h.getExtent(aG);aL.find("div.tlMenuContainer").each(function(){i(this).css("cssText","right:"+aO.r+"px !important; bottom:"+aO.b+"px !important; z-index:"+aM)});aL.find("div.tlSidebar").each(function(){i(this).css("cssText","right:"+aO.r+"px !important; top:"+aO.t+"px !important; z-index:"+(aM+1))});z.reposition(aL,aO,aM);if(B.isThinglinkSite()){if(aG.width()<500||aG.height()<500){aL.addClass("tlSmallNavi");i(".tlScene").addClass("tlSmallNavi")}else{aL.removeClass("tlSmallNavi");i(".tlScene").removeClass("tlSmallNavi")}}else{if(aG.width()<800||aG.height()<600){aL.addClass("tlSmallNavi");i(".tlScene").addClass("tlSmallNavi")}else{aL.removeClass("tlSmallNavi");i(".tlScene").removeClass("tlSmallNavi")}}if(!f.isTouchDevice&&(aG.width()<150||aG.height()<300)){aL.addClass("tlVerySmallNavi");i(".tlScene").addClass("tlVerySmallNavi")}else{aL.removeClass("tlVerySmallNavi");i(".tlScene").removeClass("tlVerySmallNavi")}if(aG.width()<50||aG.height()<150){aL.addClass("tlNoBadgeIcon")}else{aL.removeClass("tlNoBadgeIcon")}if(B.makeSidebarSticky){aL.find("div.tlSidebar").show()}}function Z(aG,aJ){var aI=i(aJ).closest(".tlImageContainer");var aF="<div class='tlLogo'><span></span></div>";var aH="<div class='tlMessage'>"+d("ExceededViews.ImageCreatedByThinglink")+"<br/><a target='_blank' href="+B.getBaseUrl()+"/scene/"+aG+"?buttonSource=viewLimits>"+d("ExceededViews.VisitThinglinkLink")+"</a></div>";aI.append("<a target='_blank' href="+B.getBaseUrl()+"/scene/"+aG+"?buttonSource=viewLimits class='tlExceededViewsLimit'></a>");aI.find("a.tlExceededViewsLimit").append("<div class='tlVerticalCenter'>"+aF+aH+"</div>")}function am(aI,aG,aF){var aN=i(aI).closest(".tlImageContainer");var aP=aN.find(".tlVerticalCenter");v.createGdprOverlay(aN,"Image");X=[];for(var aL=0;aL<aG.length;aL++){if(aG[aL].thingUrl){if(aG[aL].theme=="iframe"){if(aG[aL].contentUrl){if(aG[aL].contentUrl.indexOf("oembed")!=-1||aG[aL].contentUrl.indexOf("facebook-page.jsp")!=-1||aG[aL].contentUrl.indexOf("customizedrichlink")!=-1){var aQ=v.extractRootDomain(aG[aL].thingUrl);if(v.isExternalDomain(aQ)&&X.indexOf(aQ)===-1){X.push(aQ)}}}}else{if(aG[aL].theme=="rich"){var aH="";var aS="";var aM=v.extractRootDomain(aG[aL].thingUrl);if(aG[aL].contentUrl){aH=v.extractRootDomain(aG[aL].contentUrl)}if(aG[aL].icon){aS=v.extractRootDomain(aG[aL].icon)}if(v.isExternalDomain(aH)&&aH.length!==0&&X.indexOf(aH)===-1){X.push(aH)}if(v.isExternalDomain(aM)&&aM.length!==0&&X.indexOf(aM)===-1){X.push(aM)}if(v.isExternalDomain(aS)&&aS.length!==0&&X.indexOf(aS)===-1){X.push(aS)}}}}}X.sort();X.forEach(function(aV,aU){var aW='<a href="https://www.'+aV+'" target="_blank">'+aV+"</a>";if(aU<X.length-1){aW+=", "}else{aW+=". "}i(".contentLinks").append(aW)});var aK=false;var aT=null;try{aT=JSON.parse(window.localStorage.getItem("tl-"+aF))}catch(aR){console.error("[ThingLink] Exception accessing local storage.",aR)}if(!aT||aT.length===0){aK=true}else{var aO=aT.domains;for(var aJ=0;aJ<aO.length;aJ++){if(X[aJ]!==aO[aJ]){aK=true;break}}aK=v.isExceededTime(aT.timestamp)}if(X.length===0){aK=false}if(!aK){return}else{i("#tlGdprOverlay").css({display:"block"})}i(".gdpr-btn-accept").data("id",aF);i(".gdpr-btn-accept").data("domains",X);i(".gdpr-btn-accept").bind("click",v.acceptGDPR)}i(window).unload(function(){try{window.localStorage.removeItem("embedLinksCurrentImage")}catch(aF){console.error("[ThingLink] Exception accessing local storage.",aF)}});E.reposition=function(aG){if(!aG){var aF=i(".tlImageContainer .thinglinkImage"),aK;for(aK=0;aK<aF.length;aK++){E.reposition(aF.eq(aK))}}else{var aM=i(aG).closest(".tlImageContainer"),aL=i(aG).parent(),aT=aM.find(".tagx"),aN=aM.css("display"),aI;if(aM.length===0){return}var aR=aM.css("z-index");aR++;aM[0].style.cssText="display: none;";aM.before(aG);aG[0].style.cssText=aG.data("tlOriginalCss");var aJ={w:0,h:0};if(aG.tlImage("hasSize")){aJ=h.getDimensions(aG)}aL.prepend(aG);aM.css("display",aN);ad(aM,aG,aJ,aR);var aH={l:0,t:0};if(aM.css("box-sizing")==="content-box"){var aP=h.getExtent(aM[0]);aH.l=aP["padding-left"];aH.t=aP["padding-top"]}var aO,aS,aQ;for(aI=0;aI<aT.length;aI++){aO=aT.eq(aI);aS=aO.data("thing");aQ=h.getThingRect(aG,aS);aQ.l=aQ.l+aH.l;aQ.t=aQ.t+aH.t;e.repositionElement(aQ,aO[0]);if(aO.hasClass("hovered")){x(aO)}}g.resizeAllNubbinsIfTooSmall()}};E.removeTags=function(aG){if(!aG){aG=i("body")}var aF=i(aG).find(".tlThingContainer");i.each(aF,function(aH,aL){var aI=i(aL);var aK=aI.find(".tagx");var aJ=aK.attr("tl-thing-id");i("#tl-a-"+aJ).remove();aI.remove()})};E.renderTag=function(aJ,aF){var aG=C.render(aF,null,x);aG.appendTo("#tlTagContainer");var aH=aG.data("bubbledata");var aI=A.render(aJ,aF,aH.rtid);return{hoverHandler:aH.hoverHandler,clickHandler:aH.clickHandler,template:aI,bubble:aG}};E.prepareTagForDisplay=function(){D.prepareTagForDisplay.apply(this,arguments)};E.openEditor=function(aF,aI,aH,aG){a.open(aF,aI,aH,aG)};E.openShare=function(aK,aI){var aL=i(aK);var aH=aI?i(aI).attr("tl-channel-id"):null;var aF=aL.closest(".tlImageContainer");if(aH){var aG={id:aH};u.setup(aF,aL,aG)}else{var aJ=aL.tlImage("sceneData");u.setup(aF,aL,aJ)}};E.openTouch=function(aF){i(aF).closest(".tlImageContainer").find(".tlMenuTouch").click()};E.toggleFullscreen=function(aF){i(aF).closest(".tlImageContainer").find(".tlMenuFullscreen").click()};E.addExternalCss=H.addExternalCss;E.closeAllStickyTags=function(){c.closeAllStickyTags()};E.highlightImage=function(aG){function aM(aO,aR){var aP=aO.find(".nubbin.unpinned");var aQ=aO.find(".nubbin .nubbinGlow");return setTimeout(function(){var aS=2500;if(!aO.hasClass("tlHover")&&!B.makeNubbinsSticky){l.variateOpacity("hide",aP,aS)}l.variateOpacity("hide",aQ,aS/2);aG.data("hideNubbinsTimeout",0)},aR)}var aI=aG.closest(".tlImageContainer");var aJ=B.initialNubbinShowDuration;if(aG.data("hideNubbinsTimeout")){clearTimeout(aG.data("hideNubbinsTimeout"));aG.data("hideNubbinsTimeout",aM(aI,aJ))}else{var aK=aI.find(".nubbin");var aL=aK.find(".nubbinGlow");l.variateOpacity("show",aL,aJ);l.variateOpacity("show",aK,100);var aF=aM(aI,aJ);aG.data("hideNubbinsTimeout",aF)}if(B.highlightCallback){var aH=aG.tlImage("sceneData");if(B.highlightCallback(aH,aI)){m.logSceneView(aI)}}if(Math.random()<0.001){var aN=m.calcABTestString(aI);m.logActivity({name:"sampled scene view",sceneId:aI.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:B.isThinglinkSite(),ABTests:aN},true)}};function ab(aF,aG){b.checkImageInViewport(aF,function(){if(aG.hasClass("tlSneakPeeked")){return}aG.addClass("tlSneakPeeked");E.highlightImage(aF.find(".thinglinkImage"))})}function aw(aI,aH){var aJ=aI.parents(".tlImageContainer").find(".tlContextMenu");if(aJ.children().length<1){return}aJ.show();var aG=aH.pageX-aI.offset().left;var aF=aH.pageY-aI.offset().top;aJ.css("cssText","display: block; left: "+aG+"px !important; top: "+aF+"px !important; z-index: "+aJ.css("z-index"))}function Q(aG){var aH=aG.find(".thinglinkImage");if(!B.disableContextMenu){var aF=i(aG).find(".tagx");if(aF.length>0){i.each([aF,aH],function(aJ,aI){aI.bind("contextmenu",function(aK){if(!B.disableMenuItems){aw(aH,aK)}return false})})}}}function al(aF){setTimeout(function(){var aH=aF.find(".nubbin");function aG(){setTimeout(function(){ab(aF,aH)},0)}aG();i(window).scroll(r({after:aG,threshold:80}))},0)}function ay(aK,aH){var aG=false;var aI=navigator.userAgent.indexOf("Trident")!==-1;var aM=window.location.href.indexOf("/channelcard/")!==-1;if(aK&&!(aI&&aM)){aG=true;if(aK.requestFullscreen){aK.requestFullscreen()}else{if(aK.mozRequestFullScreen){aK.mozRequestFullScreen()}else{if(aK.webkitRequestFullscreen){aK.webkitRequestFullscreen()}else{if(aK.msRequestFullscreen){aK.msRequestFullscreen()}else{aG=false}}}}}if(!aG){var aF=i(aK);var aJ=aF.find(".channelCarousel");var aL="";if(window.location.href.indexOf("on=fb")!==-1){aL="&on=fb"}if(aJ.length>0){window.open(B.getBaseUrl()+"/channelcard/"+aJ.attr("tl-channel-id")+"?fullscreen=true"+aL,"_blank")}else{window.open(B.getBaseUrl()+"/card/"+aH+"?fullscreen=true"+aL,"_blank")}}}function aB(aI,aH){var aF=aI.height(),aG=aI.width(),aJ=false,aK="tlFullscreen";return function(){var aL=aG/aF;if(aJ){i("#tlFullscreenUpsell").hide();aI.attr("height",aF).attr("width",aG);aH.removeClass(aK);aH.closest(".tlFullscreenable").removeClass(aK)}else{aI.attr("height",screen.height).attr("width",screen.height*aL);aH.addClass(aK);aH.closest(".tlFullscreenable").addClass(aK);i("#tlFullscreenUpsell").show()}aJ=!aJ}}function ai(aI,aK,aJ){var aG=j.activeTestsForUser();var aH=JSON.stringify(aG);i(document).off("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange").on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",aB(aK,aI,aJ));var aF,aL=aI.closest(".tlFullscreenable");if(aL.length>0){aF=aL[0]}ay(aF,aJ.id);m.logActivity({name:"clicked in-image fullscreen",sceneId:aI.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:B.isThinglinkSite(),ABTests:aH});return false}function O(aG,aJ,aI){s.touch(aG,c.isSceneTouched(aI.id));aG.find(".tlPopup").hide();var aF=j.activeTestsForUser();var aH=JSON.stringify(aF);m.logActivity({name:"clicked in-image touch",sceneId:aG.find(".thinglinkImage").attr("tl-scene-id"),isThinglinkSite:B.isThinglinkSite(),ABTests:aH});return false}function ah(aF,aH,aG){u.setup(aF,aH,aG)}function U(aF,aH,aG){if(typeof(aG.allowEdit)!="undefined"&&aG.allowEdit===false){aF.find(".tlMenuEdit").parent().hide()}else{aF.find(".tlMenuEdit").parent().unbind("click").click(function(aI){aI.preventDefault();a.open(aH)})}}function an(aI){var aK=aI[0];var aH=aI[1];var aJ=aI[2];var aN=c.findImageContainer(aH).find(".tlMenuItemTouch");var aP=aN.find(".tlMenuLabelTouch");var aF;if(aK){aF="Untouch";aN.removeClass("tlTouch").addClass("tlUntouch")}else{aF="Touch";aN.removeClass("tlUntouch").addClass("tlTouch")}if(aJ===undefined){aJ=0}var aO=aP.data("tlTouchCount");if(aO){aP.data("tlTouchCount",aO+aJ)}else{aP.data("tlTouchCount",aJ)}aP.text(d("Sidebar."+aF));var aG=aP.data("tlTouchCount");if(aG==1){aP.prev().attr("title",aG+" touch")}else{aP.prev().attr("title",aG+" touches")}var aM;if(aG===1){aM=d("TouchSidebarButton.TouchesOne")}else{if(aG===0){aM=d("TouchSidebarButton.TouchesNo")}else{aM=d("TouchSidebarButton.TouchesOther",aG)}}aP.prev().attr("title",aM);if(B.isThinglinkSite()){var aL;if(aG===1){aL=d("TouchDialog.TouchesOne")}else{if(aG===0){aL=d("TouchDialog.TouchesNo")}else{aL=d("TouchDialog.TouchesOther",aG)}}i("#touchCountPhrase").text(" "+aL)}return aG}function ag(aG,aK,aJ){if(aJ.indicator){var aI=B.getCDNUrl()+"/api/nubbin/"+aJ.indicator+"/plain";var aH='background-image: url("'+aI+'") !important;';i(aG).find(".tlMenu").css("cssText",aH).parent().addClass("tlMenuCustomIndicatorContainer");var aL=new Image();var aF=function(){i(aG).find(".tlMenu").css("cssText",aH+";width:"+aL.width+"px!important;height:"+aL.height+"px!important")};if((aL.complete||aL.readyState===4)&&(aL.width>0)){aF()}else{aL.onload=aF;aL.src=aI}}else{if(aJ.branding===""||!aJ.id){i(aG).find(".tlMenuContainer").remove()}}}function aq(aF,aM,aL){aF.find(".tlContextMenu").remove();var aK=i('<div class="tlContextMenu"></div>');aK.css("z-index",aM+1);aK.bind("contextmenu",function(){return false});var aJ=function(aN){return function(){aF.find(".tlMenu"+aN).click();aK.hide();return false}};var aH,aG,aI=B.isThinglinkSite();for(aH=0;aH<ac.length;aH++){aG=ac[aH];if(!aL[aG.toLowerCase()]||aI){i('<div class="tlContextMenuItem tlContextMenu'+aG+'">'+d("ContextMenu."+aG)+"</div>").bind("click",aJ(aG)).appendTo(aK)}}aF.append(aK);aK.attr("unselectable","on").css("-moz-user-select","none").each(function(){this.onselectstart=function(){return false}});i("body").click(function(){if(aK.css("display")!=="none"){aK.hide()}});aK.hide()}function L(aF){aF=aF.filter(".tlVariantImageThing");aF.find("img").bind("load",function(){if(aF.is(":visible")){x(b.getThingPieces(aF).nubbin)}})}function at(aG,aI,aF,aK,aH,aJ){setTimeout(function(){var aS=h.getThingRect(aI,aF);var aP={l:0,t:0};if(aG.css("box-sizing")==="content-box"){var aO=h.getExtent(aG[0]);aP.l=aO["padding-left"];aP.t=aO["padding-top"]}aS.l=aS.l+aP.l;aS.t=aS.t+aP.t;var aN=i("#tl-a-"+aF.id);if(aN.length===0){aN=C.render(aF,aH,x);n.applyNewCustomization(aN,aF.styles,f.getSourceDomain(aF.contentUrl));aN.appendTo("#tlTagContainer")}var aR=aN.data("bubbledata");aG.find(".tl-a-"+aF.id).parent().remove();var aM=A.render(aS,aF,aR.rtid);aM.appendTo(aG);var aL=aM.find(".tl-a-"+aF.id).first();aL.data("thing",aF);aN.css("cssText",aN[0].style.cssText+"z-index: "+(aK+1)+";");var aQ=aL.find(".nubbin").last();aQ.css("z-index",aK);D.attach(aL,aG);if(aJ){aJ(aF)}},0)}function V(aF,aG){aF.find(".tagx").each(function(){var aL=b.getThingPieces(this);var aK=aL.nubbin.attr("tl-thing-id");var aJ=true;var aH,aI;if((aG!==undefined)){for(aH=0;aH<aG.length;aH++){aI=aG[aH];if(aK===aI.id){aJ=false;break}}}if(aJ){aL.bubble.remove();aL.nubbin.remove()}})}function ap(aZ){var a7,aS,a0;if(!aZ.tlImage("isOk")){N(aZ,false);return}aS=h.getDimensions(aZ);a7=aZ.tlImage("sceneData");if(!a7){if(aZ.tlImage("isInspectedByThinglink")){return}a7={things:[],allowEdit:true}}a0=(a7.things&&a7.things.length!==0);N(aZ,true,!a0);try{aZ.parents("a").addClass("tlWrappingAnchor");if(!f.no(a7.id)){aZ.attr("tl-scene-id",a7.id)}var bb=aZ.closest(".tlImageContainer");var a4=aZ.tlImage("isWhitelabel");if(!a4&&a7.showFourDotsMenu&&B.fourDotsInfo){z.setup(bb,a7);a7.branding=""}else{if(aZ.tlImage("hasThinglinkBadge")){bb.find(".tlMenu").wrap('<a href="https://www.thinglink.com?buttonSource=badgeButtonBoxPro"></a>')}}var aY=aZ.css("z-index")||0;var aT=1;aY=(aY==="auto")?1:parseInt(aY,10)+aT;if(a7.titleUrl!==undefined){var a3=h.getExtent(aZ);var aG=f.getDomain(a7.titleUrl);var a6=i('<div class="tlFirstseen"><a href="'+a7.titleUrl+'">'+d("OriginallyThinglinked",aG)+"</a></div>");bb.append(a6);a6.css("cssText","bottom: "+a3["padding-bottom"]+"px !important; left: "+a3["padding-left"]+"px !important;");a6.click(function(){window.location=i(this).find("a").attr("href")})}ad(bb,aZ,aS,aY);U(bb,aZ,a7);var aX=(aS.w<130||aS.h<130);var aK=(i(window).width()<290||i(window).height()<350);var aI=function(){bb.find(".tlMenuItemShare,.tlMenuItemTouch,.tlMenuItemFullscreen").hide()};var a2=B.isThinglinkSite();var aM=B.disablePostToChannel||false;var ba=a7.hideitems||{touch:false,share:false,fullscreen:false};var aP;if(a7.gdpr===undefined||a7.gdpr===null){aP=true}aP=a7.gdpr;if(a7.isExceededViews&&!a2){Z(a7.id,aZ)}if(!a7.isExceededViews&&aP){am(aZ,a7.things,a7.id)}var aN=function(){if(a2&&!aM){i.ajax({url:window.contextPath+"/api/user/me/channels?contains="+a7.id+"&scope=groups",success:function(bj){var bo=i(".tlMenuItemPost").length>0?i(".tlMenuItemPost"):i("#scenePost");if(bo.length===0){return}var bk=bj.results,bl=true,bp=function(bt,bs){if(bt.title>bs.title){return 1}if(bt.title<bs.title){return -1}return 0};bk.sort(bp);function bc(bs){return bs.map(function(bt){return'<div id="progress-'+escapeHtml(bt.id)+'" class="channelProgress"></div><div class="channel"><input type="checkbox" class="addToChannel" id="'+escapeHtml(bt.id)+'"'+(bt.contains[a7.id]?' checked="true"':"")+'/> <div class="title">'+escapeHtml(bt.title)+'</div><div id="checked-'+escapeHtml(bt.id)+'" class="_icon_checked checked" style="display: '+(bt.contains[a7.id]?"inline-block":"none")+'"></div><div id="unchecked-'+escapeHtml(bt.id)+'" class="_icon_unchecked checked" style="display: '+(bt.contains[a7.id]?"none":"inline-block")+'"></div></div>'}).join("")}function bf(bu,bs){var bt=[];if(bu&&bu!==" "){bs.map(function(bv){if(bv.title.toLowerCase().indexOf(bu.toLowerCase())!==-1){bt.push(bv)}})}else{bt=bs}return bt}function bm(bs){return'<input dir="auto" id="channelSearch" name="channelSearch" type="text" placeholder="Find or create channel" maxlength="60"/>'.concat('<button style="display:none" id="addChannel" class="btn btn-primary _icon_add"> Create new channel</button>').concat('<div id="channelError" style="display: none"></div>').concat('<div id="channelList">').concat(bc(bs)).concat("</div>")}function bn(bt){if(bt){var bs=document.getElementById("channelSearch").value;if(bs&&bk.map(function(bu){return bu.title.toLowerCase().trim()!==bs.toLowerCase().trim()}).reduce(function(bu,bv){return bu&&bv})){document.getElementById("addChannel").setAttribute("style","display: inline")}else{document.getElementById("addChannel").setAttribute("style","display: none")}return bt}else{document.getElementById("addChannel").setAttribute("style","display: inline");return""}}function bd(){bl=true;bo.popover("hide")}function br(bt,bs){bs.map(function(bu){if(bu.id===bt){bu.contains[a7.id]=true}});document.getElementById(bt.toString()).checked=true;document.getElementById("checked-"+bt).setAttribute("style","display: inline-block");document.getElementById("unchecked-"+bt).setAttribute("style","display: none")}function bq(bt,bs){bs.map(function(bu){if(bu.id===bt){bu.contains[a7.id]=false}});document.getElementById("checked-"+bt).setAttribute("style","display: none");document.getElementById("unchecked-"+bt).setAttribute("style","display: inline-block")}function be(bu,bs){var bt=document.getElementById("channelList");while(bt.firstChild){bt.removeChild(bt.firstChild)}i(bt).append(bn(bc(bf(bu,bs),bs)))}function bi(){bo.popover({container:"body",placement:"left",title:'<span class="_icon_images"></span> Post to channel<span id="closeAddChannel" class="_icon_close"></span>',content:bm(bk),trigger:"click",html:true})}function bg(bt){var bs=document.getElementById("channelError");bs.textContent=JSON.parse(bt.responseText).error.description;bs.setAttribute("style","display: block")}bi();bo.on("vclick",function(){if(bl){if(bk.length>15){i("body").addClass("fixPopover")}if(!(document.documentElement.hasOwnProperty("ontouchstart"))){i("#channelSearch").focus()}}else{bo.popover("destroy");bi()}bl=!bl});function bh(){var bt=document.getElementById("channelSearch"),bs=document.getElementById("addChannel"),bu=bt.value.trim();bt.setAttribute("disabled","true");bs.setAttribute("disabled","true");i.ajax({url:window.contextPath+"/api/user/me/channels",type:"POST",data:{title:bu},success:function(bv){bs.setAttribute("style","display: none");if(!bv.results.contains){bv.results.contains={};bv.results.contains[a7.id.toString()]=false}if(bu!==bv.results.title){bt.value=bv.results.title}bk.push(bv.results);bk.sort(bp);be(bt.value,bk)},error:function(bv){bg(bv)},complete:function(){bt.removeAttribute("disabled");bs.removeAttribute("disabled")}})}i("body").on("vclick","#addChannel",bh);i("body").on("change",".addToChannel",function(bv){var bu=bv.target,bt=bu.id;bu.setAttribute("disabled","true");var bs=document.getElementById("progress-"+bt);if(document.addEventListener){bs.setAttribute("style","width: 25%")}if(bv.target.checked){i.ajax({url:window.contextPath+"/api/channel/"+bt+"/content",data:{itemIds:a7.id},xhr:function(){var bw=i.ajaxSettings.xhr();function bx(by){if(by.lengthComputable){var bz=by.loaded/by.total;bs.setAttribute("style","width: "+bz*100+"%")}}if(bw.addEventListener){bw.addEventListener("progress",bx,false)}return bw},type:"POST",success:function(){br(bt,bk)},error:function(bw){bg(bw)},complete:function(){bu.removeAttribute("disabled");if(bs.classList){bs.classList.add("progressDone");setTimeout(function(){bs.removeAttribute("style");bs.classList.remove("progressDone")},400)}}})}else{i.ajax({url:window.contextPath+"/api/channel/"+bt+"/content?itemIds="+a7.id,type:"DELETE",xhr:function(){var bw=i.ajaxSettings.xhr();function bx(by){if(by.lengthComputable){var bz=by.loaded/by.total;bs.setAttribute("style","width: "+bz*100+"%")}}if(bw.addEventListener){bw.addEventListener("progress",bx,false)}return bw},success:function(){bq(bt,bk)},error:function(bw){bg(bw)},complete:function(){bu.removeAttribute("disabled");if(bs.classList){bs.classList.add("progressDone");setTimeout(function(){bs.removeAttribute("style");bs.classList.remove("progressDone")},400)}}})}});i("body").on("keyup","#channelSearch",function(bs){document.getElementById("channelError").setAttribute("style","display: none");if(bs.keyCode===13){bh(bs)}else{if(bs.keyCode===27){bd()}else{be(bs.target.value,bk)}}});i("body").on("vclick","#closeAddChannel",bd);if(!document.documentElement.hasOwnProperty("ontouchstart")){i(window).resize(bd)}i(document).on("vclick",function(bs){if(bs.target.className.toLowerCase().indexOf("post")===-1&&!i(bs.target).closest("div.popover").length&&i("div.popover").is(":visible")){bd()}})}})}};if(a7.id){aN();var aL=function(bc){return function(bd){bd.stopPropagation();var be;if(bc==="Share"){be=ah}else{if(bc==="Touch"){be=O}else{if(bc==="Fullscreen"){be=ai}}}be(bb,aZ,a7,aY);return false}};if(B&&B.extraSidebarIcons&&B.extraSidebarIcons.indexOf("Fullscreen")!==-1){bb.find(".tlMenuFullscreen").parent().unbind("vclick").bind("vclick",aL("Fullscreen"))}var a1,aU;for(a1=0;a1<ac.length;a1++){aU=ac[a1];if(!ba[aU.toLowerCase()]||a2){bb.find(".tlMenu"+aU).parent().unbind("vclick").bind("vclick",aL(aU));if(aU==="Touch"){an([a7.touched,a7.id,a7.touches])}}else{bb.find(".tlMenuItem"+aU).hide()}}if(aX||aK||a7.visibility==="PRIVATE"){aI()}}else{aI()}ag(bb,aZ,a7);if(!B.manualViewStats){m.installTracker(a7,bb)}if(!B.disableContextMenu&&!B.disableMenuItems){aq(bb,aY,ba)}if(a2){bb.addClass("tlThinglinkSite")}var a8=function(bc){return function(bd){var be=i(this);if(bd.type==="touchend"){be.click();return false}if(bd.type==="mouseenter"){be.addClass(bc)}else{be.removeClass(bc)}}};i(".tlSidebar .tlMenuItem").bind("mouseenter mouseleave touchend",a8("tlMenuItemHover"));if(a7&&f.no(a7.error)){y.attach(bb);if(a4){bb.find(".tlMenuItemTouch").hide()}if(B.makeSidebarSticky){i(".tlSidebar").show()}var aH=function(bc){var be=["contentUrl","icon","thingUrl"],bd,bf;for(bd=0;bd<be.length;bd++){bf=be[bd];if(bc[bf]&&bc[bf].substring(0,2)==="//"){bc[bf]=f.getProtocol()+bc[bf]}}};var aV=a7.things,a9,aR;if(aV!==undefined){var aW=0;var aJ=function(bc){g.resizeNubbinsForThing(bc.id,bc.nubbin);aW=aW+1;if(B.nubbinSneakPeek&&(aW===aV.length)){al(bb);Q(bb)}else{if(B.makeNubbinsSticky){setTimeout(function(){l.variateOpacity("show",bb.find("div.nubbin"),1)},1)}}};var aQ;for(a9=0;a9<aV.length;a9++){aR=aV[a9];aH(aR);if(i.type(aR.styles)!="object"){aQ="";try{aQ=aR.styles?JSON.parse(aR.styles):{}}catch(a5){}aR.styles=i.extend(n.defaultCustomStyles(),aQ)}if(i.type(aR.properties)!="object"){var aF={};try{aF=aR.properties?JSON.parse(aR.properties):aF}catch(a5){}aR.properties=aF}at(bb,aZ,aR,aY,a4,aJ)}}V(bb,aV)}}catch(aO){console.log(aO)}}function S(aF){if(aF.lang){B.setRequestLanguage(aF.lang)}if(aF.owner===true||aF.owner===false){s.setUserLoggedIn(true)}p.getQueriedImages().each(function(){var aK=i(this);var aL=c.getSceneUrl(this);var aJ=aF[R(aK).id];if(!aJ){aJ=aF[aL]}if(!aJ){aJ=aF[f.cleanURIEncoding(aL)]}if(!aJ){aJ=aF[encodeURIComponent(aL)]}if(!aJ){try{aJ=aF[decodeURIComponent(aL)]}catch(aN){}}if(!aJ){aJ=null}var aI=(aJ&&aJ.things&&aJ.things.length!==0);var aH=(aJ&&aK.tlImage("isAlwaysThinglink"));if(aF.owner||(aJ&&aJ.allowEdit)||aI||aH){w.triggerEvent("tlScenesFound");aK.parents(".tlImageContainer").find(".tlMenu").show();aK.tlImage("sceneData",aJ);if(aK.tlImage("hasSize")){ap(aK)}else{aK.load(function(){ap(aK)})}}else{if(aJ){var aG=aK.parents(".tlImageContainer");aG.find(".tlMenu, .tlSidebar").hide(200);aG.unbind("mouseenter mouseleave");var aM={w:0,h:0};if(aK.tlImage("hasSize")){aM=h.getDimensions(aK)}aG.css({cssText:"width:"+aM.w+"px!important; height:"+aM.h+"px!important;"})}}})}function aD(){var aF=window.location.href.replace(/^[^\#]+\#?/,"");if(aF.match(/tl[\-\=]/)){aF=aF.slice(3);i("img").each(function(){var aH=q.generateImageHash(this);if(aH==aF){var aG=B.activateImage;if(aG){aG(i(this))}return false}})}}function av(){i.extend(i.easing,{easeOutCubic:function(aG,aH,aF,aJ,aI){return aJ*((aH=aH/aI-1)*aH*aH+1)+aF}})}function ak(aG){if(aG.tlImage("isOk")){p.addQueriedImage(aG);var aF=R(aG).id;if(!aF){if(window.__tlid){E.rebuild(c.getSceneUrl(aG))}else{var aH=o.getCacheSceneId(c.getSceneUrl(aG));if(aH){aG.attr("tl-scene-id",aH);E.rebuild(aH)}}}else{E.rebuild(aF)}}}function P(aH){var aG=i(aH);var aF=aG.closest(".tlImageContainer");if(aF.length>0){E.removeTags(aF);aG.removeAttr("tl-scene-id");aF.find(".tlEmbedPopup, .tlSharePopup").remove()}ak(aG)}var ar=function(aL,aK,aH){if(!aL){return}var aG=aL.attr("tl-thing-id"),aJ=i("img[tl-scene-id="+aK+"]").first(),aF=K(aG,aJ.tlImage("sceneData"));var aI=function(aM){m.logClick(aG,aK,aJ,aM)};if(aH){aH=decodeURIComponent(aH);C.relocateOrOpen(aH,aI,aF,window.top===window.self)}else{aI()}};var K=function(aH,aF){var aG;if(aF){aF.things.map(function(aI){if(aI.id===aH){aG=aI}})}return aG};var ax=function(aM,aH){if(!aM){return}var aG=aM.attr("tl-thing-id");var aL=i("#tl-a-"+aG).find("iframe");var aK=aM.data("thing").styles||aM.data("tlStyles")||{};aK=f.extend(n.defaultCustomStyles(),aK);var aJ=aM.data("thing").productName||aM.tlTag("getRawDescription")||"";var aI=aM.data("thing").properties||aM.tlTag("getRawProperties")||{};var aF=n.mergeParcelData(aK,aJ,aI);aF=f.extend(aF,(aM.tlTag("getParcel")||{}));n.sendParcelToIframe(aL,aF,aH)};var W=function(){i(".tlSharePopup").hide()};var T=function(aJ,aG){if(!aJ){return}aG=decodeURIComponent(aG);var aH=b.getThingPieces(aJ);var aF=aH.bubble.data("bubbledata");var aI=aF.rtid;I.registerThing(aG,aI)};var af=function(aH,aG){if(!aH){return}if(aG=="true"){aG=true}else{if(aG=="false"){aG=false}else{aG=null}}var aF=aH.attr("tl-thing-id");i("#tl-a-"+aF).toggleClass("tlPlaying tlSticky",aG)};var aa=function(aG,aF){if(!aG){return}aF=decodeURIComponent(aF);if(/^http:\/\//.test(aF)){aG.attr("href",aF)}else{aG.removeAttr("href")}};var Y=function(aO,aG,aR){if(!aO){return}var aP=parseInt(aG,10);var aJ=parseInt(aR,10);if(isNaN(aP)&&isNaN(aJ)){return}var aK=aO.attr("tl-thing-id");var aM=i("#tl-a-"+aK).find(".tlThingContent");var aQ=aM.find(".tlSpinner");var aI=aM.find("iframe");var aF=e.parseCssText(aI.attr("style"),true,true);var aL=aF["max-width"];var aS=aF["max-height"];if(aP>0){if(aP<50){aP=50}else{if(aP>800){aP=800}}if(aL&&aP>aL){aP=aL}aF.width=aP+"px;";var aN=e.parseCssText(aM.attr("style"),false,false);aN.width=aP+"px !important";aM.css({cssText:f.mapToCssText(aN)})}else{aF.width=aI.width()+"px;"}if(aJ>0){if(aJ<20){aJ=20}else{if(aJ>600){aJ=600}}if(aS&&aJ>aS){aJ=aS}aF.height=aJ+"px;"}else{aF.height=aI.height()+"px;"}aF["max-width"]=aF["max-width"]+"px";aF["max-height"]=aF["max-height"]+"px";var aH="";if(aF.opacity){aH+=" opacity: "+aF.opacity+";";aF.opacity=null}aQ.css({cssText:f.mapToCssText(aF,true)});aI.css({cssText:f.mapToCssText(aF,true)+aH});if(aO.hasClass("hovered")){x(aO)}};var aE=function(aF){if(E.editorPopup){E.editorPopup.close();E.editorPopup=null}i("#thinglinkCBClose").click();if(E.editorCloseCallback){E.editorCloseCallback.call(this,aF)}};function ao(aG){var aI=aG[0];var aF=aG[1];var aH=aG[2];switch(aI){case"resize":Y(aF,aH[0],aH[1]);break;case"setSticky":af(aF,aH[0]);break;case"closeEditor":aE(aH[0]);break;case"setNubbinClickUrl":aa(aF,aH[0]);break;case"changeTagContentUrl":T(aF,aH[0]);break;case"touchLogin":s.touchLoginCallback(null,aH[0]);break;case"sharingLinkOpened":W(aH[0],aH[1]);break;case"tagClick":ar(aF,aH[0],aH[1]);break;case"getStyles":ax(aF,aH[0]);break;default:console.warn("Unknown postmessage command "+aI)}}function aC(aH){if(E.status!="loadcomplete"){var aF=aH.parent().parent();E.removeTags(aF);aF.find(".tlMenuItemShare,.tlMenuItemTouch,.tlMenuItemFullscreen").show();var aG=aH.attr("tl-scene-id");var aI=c.getSceneUrl(aH);if(!aG){E.rebuild(aI)}else{E.rebuild(aG)}}}function aA(aF){var aI=i(aF);var aG=aI.attr("tl-thing-id");var aH=i("#tl-a-"+aG);return aH.find("audio")}function M(){var aG=true;var aH=0;var aJ=f.isTouchDevice?"tlTouchDevice":"";var aI=i("#tlTagContainer");if(aI.length===0){aI=i('<div id="tlTagContainer" class="'+aJ+'"/>').appendTo("body")}else{aI.addClass(aJ)}var aF={tagify:function(aU){var aS=i.extend({complete:null,everyLink:false,maxAge:null},aU);var aM=function(){aH++;return aH};var aQ=function(aW,aZ,aX){var aY=encodeURIComponent("|");i.getJSON(B.getApiBaseUrl()+"/api/resolvetag?client_id="+B.clientId+"&url="+aW.map(encodeURIComponent).join(aY)+(aS.maxAge?"&maxAge="+aS.maxAge:"")+(aX?"&appId="+aX:"")+(B.isThinglinkSite()?"":"&callback=?"),aZ)};var aT=function(aW,a1,a2){var aX=((a1!==undefined)?a1.content:{});if(i.isEmptyObject(aX)&&aW.attr("href")!==""){aX.title=aW[0].hostname;aX.thingUrl=aW.attr("href")}aX.id=aW.attr("tl-thing-id");aX.productName=aW.attr("title")||"";var aY=aW.attr("data-tagopacity");aX.opacity=(aY==null||aY.length===0)?"1.0":parseFloat(aY);aW.data("thing",aX);if(!a2&&b.getThingPieces(aW).nubbin[0].offsetLeft>0){var a0=C.render(aX,null,x);L(a0);var aZ=a0.data("bubbledata").rtid;aW.addClass("rtid-"+aZ);aI.append(a0)}D.attach(aW)};var aP=function(aW){aW.removeAttr("tl-thing-id").removeClass("tagx");aW[0].className=aW[0].className.replace(/tl-a-000\d+ ?/,"")};var aL=function(a1,a0){var aY,aX,a2=[];var aZ,aW;for(aY in a0){if(a0.hasOwnProperty(aY)){aZ=a0[aY];for(aX=0;aX<aZ.length;aX++){if(!i.isEmptyObject(a1[aY])||aS.everyTag){aW=(aX!==0);aT(aZ[aX],a1[aY],aW);a2.push(aZ[aX])}else{aP(aZ[aX])}}}}if(typeof aS.complete=="function"){aS.complete.call(document,a2)}};if(aG){aG=false;H.injectEmbedCSS()}var aV=this.filter("a[href],a[tl-tagify-url]");var aR={};var aO=[];var aK;aV.each(function(){var aW=i(this);var aZ=aW.attr("tl-tagify-url");var aX=aZ||(aW.attr("href")!=null?this.href:"#");var aY;aK=aW.attr("tl-tagify-appid");if(aS.everyTag||(aX.length>5&&aX.substring(0,1)!="#")){if(aR[aX]){aY=aR[aX][0].attr("tl-thing-id");aR[aX].push(aW)}else{aY="000"+aM();aR[aX]=[aW];aO.push(aX)}aW.addClass("tl-a-"+aY).addClass("tagx").attr("tl-thing-id",aY)}});var aN=function(aW){aL(aW,aR)};if(aV.length>0){aQ(aO,aN,aK)}},isImageTag:function(){var aK=this.attr("tl-thing-id");if(aK.substring(0,3)=="000"){return false}return true},reposition:function(){this.each(function(){x(i(this))});return this},updateBubbleToParcel:function(aK){aK.each(function(aO,aP){var aR=i(this);var aM=aR.attr("tl-thing-id");var aN=i("#tl-a-"+aM);var aQ="";if(aR.data("thing")){aQ=f.getSourceDomain(aR.data("thing").contentUrl)}var aL=aR.tlTag("getParcel");n.applyNewCustomization(aN,aL,aQ)})},playListener:function(aL){var aK=aA(this);if(aK.length){aK.get(0).addEventListener("play",aL)}},pauseListener:function(aL){var aK=aA(this);if(aK.length){aK.get(0).addEventListener("pause",aL)}},playAudio:function(){var aK=aA(this);if(aK.length){aK[0].play()}},pauseAudio:function(){var aK=aA(this);if(aK.length){aK[0].pause()}},setStyles:function(aL){this.data("tl-styles",aL);var aK=this.data("tl-parcel")||{};aK=f.extend(aK,aL);this.data("tl-parcel",aK);aF.updateBubbleToParcel(this)},getStyles:function(){return this.data("tl-styles")},getParcel:function(){return this.data("tl-parcel")},getRawDescription:function(){return this.data("tl-raw-description")},setProperties:function(aL){this.data("tl-raw-properties",aL);var aK=this.data("tl-parcel")||{};aK=f.extend(aK,{properties:aL});this.data("tl-parcel",aK);aF.updateBubbleToParcel(this)},getRawProperties:function(){return this.data("tl-raw-properties")},setDescription:function(aN,aK,aO){this.data("tl-raw-description",aN);aN=aN.replace(/\n\n+/g,"\n\n");aN=aN.replace(/\n/g,"<br>");var aM=this.data("thing");var aL=(aM&&aM.hideDescription===true);this.each(function(){var aT=i(this);var aR=aT.attr("tl-thing-id");var aS=i("#tl-a-"+aR);var aQ;if(aS.hasClass("tlThemeIframeThing")){if(!aL){if(aS.find(".tlIframeDescription").length===0){if(aN.length>0){aS.find(".tlThingContent").prepend('<div class="tlIframeDescription" /><hr class="tlHrDescription" />')}}else{if(aN===""){aS.find(".tlIframeDescription").remove();aS.find(".tlHrDescription").remove()}}aS.find(".tlIframeDescription").html(aN)}else{if(aS.find(".tlIframeDescription").length>0){aS.find(".tlIframeDescription").remove()}}}else{if(aS.hasClass("tlThemeRichThing")){aS.find(".tlThingTitle").html(aN)}else{aQ=aS.find(".tlThingContent");aQ.html(aN);C.setBubbleTagTextStyle(aS,aN);if(aK.length>0){if(aN.length>0){aQ.append("<br>")}var aP=i('<a class="tlThingLink" href="'+aK+'"></a>');aP.text(aP[0].hostname);aQ.append(aP)}}}if(aO){aQ=aQ||aS.find(".tlThingContent");if(aQ.find("audio").length===0){aQ.append('<audio volume="0.8" loop '+(aM.icon||aM.contentUrl?"":" controls ")+' src="'+aO+'"></audio>')}}});return this},open:function(aK){this.each(function(){var aL=i(this);if(!aL.hasClass("hovered")){i("#tl-a-"+aL.attr("tl-thing-id")).addClass(aK?"tlSticky":"");aL.mouseenter();x(aL)}});return this},close:function(){this.each(function(){var aK=i(this);var aL=aK.attr("tl-thing-id");aK.removeClass("tlSticky mouseover linked hovered");if(i("#tl-a-"+aL).hide().hasClass("tlPlaying")){i("#tl-a-"+aL).find(".tlThingClose").click()}});return this},isOpen:function(){return this.hasClass("hovered")}};i.fn.tlTag=function(aK){return aF[aK].apply(this,Array.prototype.slice.call(arguments,1))}}function az(){t.finalFetchCompleteCallback(function(){k.setStatus("tagfetchcomplete")});t.dataReceivedCallback(S);I.init();I.addListener("postMessageCommand",ao);s.addListener("updateSceneTouchStatus",an);a.addListener("editorClose",aC);window.addEventListener("message",function(aH){if(aH.data==="editorClose"){i("#thinglinkCBClose").click()}},false);M();var aF=function(aH){ak(i(aH))};var aG=function(aH){P(i(aH))};F.track("img","src",aF,aG);i(window).bind("resize",r({after:function(){E.reposition()},threshold:200,allowPropagation:true}));window.addEventListener("hashchange",function(){E.rebuild()},false);av();aD();au()}az()}());return E});tlRequire.define("measure",["jQuery","util"],function(c,a){var b={limitSizeHelper:function(f,e,k){var i=18;var h=f[1]-f[0];if(h<i){var d=(i-h)/2;f[0]=f[0]-d;f[1]=f[1]+d;var j=(e-f[0]);if(j>0){f[0]=e;f[1]=f[1]+j}var g=(f[1]-k);if(g>0){f[0]=f[0]-g;f[1]=k}}return f},getThingRect:function(e,k){var d=c(e);if(d.length){var l=b.getExtent(d),h=d.width(),f=d.height(),j=[Math.round(h*k.x1),Math.round(h*k.x2)],i=[Math.round(f*k.y1),Math.round(f*k.y2)];j=b.limitSizeHelper(j,0,h);i=b.limitSizeHelper(i,0,f);var g={t:i[0]+l.t,l:j[0]+l.l,w:(j[1]-j[0]),h:(i[1]-i[0])};return g}else{return{t:0,l:0,w:0,h:0}}},getCoordinates:function(g){var e=c(g);if(e.length){var f=b.getExtent(e);var d=f.l;var h=f.t;return{x:d,y:h}}else{return{x:0,y:0}}},getDimensions:function(i){var f=c(i);var e={w:0,h:0,rawWidth:0,rawHeight:0};if(f.length){var h=b.getExtent(f);e=a.extend(h);e.rawWidth=f.width();e.rawHeight=f.height();var d=e.rawWidth+h.l+h.r;var g=e.rawHeight+h.t+h.b;e.w=d;e.h=g}return e},getExtent:function(e,p){var d=c(e);if(!p){p=["margin","padding","border"]}var n=["box-sizing","border-left-color","border-top-color","border-right-color","border-bottom-color","border-left-style","border-top-style","border-right-style","border-bottom-style","border-left-width","border-top-width","border-right-width","border-bottom-width","padding-left","padding-top","padding-right","padding-bottom","background-color","left","top","right","bottom"];var k={l:0,t:0,r:0,b:0},f,g,l;if(d.length){for(f=0;f<n.length;f++){k[n[f]]=d.css(n[f])||0}for(f=0;f<p.length;f++){g=p[f];l=(g=="border")?"-width":"";var h=g+"-left"+l;var m=g+"-top"+l;var j=g+"-right"+l;var o=g+"-bottom"+l;k[h]=parseInt(d.css(h),10)||0;k[m]=parseInt(d.css(m),10)||0;k[j]=parseInt(d.css(j),10)||0;k[o]=parseInt(d.css(o),10)||0;k.l+=k[h];k.t+=k[m];k.r+=k[j];k.b+=k[o]}}return k}};return b});tlRequire.define("namespace",[],function(){if(window.__thinglink===undefined){window.__thinglink={}}if(window.__tlconfig!==undefined){window.__thinglink.config=window.__tlconfig}return window.__thinglink});tlRequire.define("nodeChangeTracker",["browserFeats"],function(e){function a(f,h,g){return f.each(function(){var k=this;var j=k[h];var i=function(m){if(m&&m.attrName&&m.attrName!=h){return}var n=k[h];if(n!=j){var l=j;j=n;g(k,n,l)}};if(typeof(this.onpropertychange)==="object"){$tlJQ(this).unbind("propertychange").bind("propertychange",i)}else{if(e.hasDomAttrModified()){$tlJQ(this).unbind("DOMAttrModified").bind("DOMAttrModified",i)}}})}function b(f,j,i,h){if(!h){h=1000}var g=function(){$tlJQ(f).each(function(){var m=$tlJQ(this);var l=this[j];var k=m.data("store-value-"+j);if(!k){m.data("store-value-"+j,l)}else{if(l!=k){m.data("store-value-"+j,l);i(this,l,k)}}})};g();setInterval(g,h)}function d(j,g,h,k,i){if(!i){i=1000}var f=function(l){setTimeout(function(){var m=$tlJQ(l);if(m.closest(".tlImageContainer").length!==0&&!$tlJQ._data(m.closest(".tlImageContainer").get(0),"events")){k(l)}else{if(!m.tlImage("isInspectedByThinglink")&&m.tlImage("isOk")){if(m.tlImage("hasSize")){g(l)}else{m.load(function(){g(l)})}}}if(h){h(l)}},1)};if(e.hasDomNodeInserted()){$tlJQ(document).bind("DOMNodeInserted",function(m){var l=$tlJQ(m.target).find(j).each(function(){f(this)});if(m.target.nodeName.toLowerCase()===j){f(m.target)}})}else{setInterval(function(){$tlJQ(j).each(function(){f(this)})},i)}}function c(i,g,f,h){if(e.hasDomAttrModified()||typeof(document.body.onpropertychange)==="object"){a($tlJQ(i),g,h);d(i,f,function(j){a($tlJQ(j),g,h)},h)}else{b(i,g,h);d(i,f,null,h)}}return{track:c}});tlRequire.define("nubbinIconSizeManager",["jQuery","cssUtil"],function(c,b){var a=(function(){var f={};var h=function(m,k,j){var i=0;var l=0;var n=false;if(f[m]){i=f[m].w;l=f[m].h}if(j.width>i){i=j.width;n=true}if(j.height>l){l=j.height;n=true}if(n){f[m]={w:i,h:l};g(c(".tagx.nubbin-"+m),m,i,l)}};var g=function(l,j,i,k){if(j&&j.indexOf("svg")===-1){l.each(function(){var q=c(this);var p=b.parseCssText(q.attr("style"),true,true);var m=false;if(i>p.width){m=true;var o=parseInt(p.left,10)+p.width/2;p.left=o-i/2;p.width=i}if(k>p.height){m=true;var n=parseInt(p.top,10)+p.height/2;p.top=n-k/2;p.height=k}if(m){var r={l:p.left,t:p.top,w:p.width,h:p.height};b.repositionElement(r,q[0])}})}};var d=function(){var i;for(i in f){if(f.hasOwnProperty(i)){g(c(".tagx.nubbin-"+i),i,f[i].w,f[i].h)}}};var e=function(j,i){var k=c(".tagx.tl-a-"+j);if(f[i]!==undefined){g(k,i,f[i].w,f[i].h)}};return{registerIcon:h,resizeAllNubbinsIfTooSmall:d,resizeNubbinsForThing:e}}());return a});tlRequire.define("nubbinRenderer",["nubbinIconSizeManager","config","util","cssUtil"],function(c,b,a,e){var d=(function(){var i=["plain","hover","hoverlink","highlight"];var h={};function j(k){return b.getCDNUrl()+"/api/nubbin/"+k}function g(n,m){if(n){var l=j(n)+"/"+m,k=new Image();k.onload=function(){c.registerIcon(n,m,this)};k.src=l;return"style=\"background-image: url('"+l+"') !important;\" "}else{return""}}return function(n){if(!h[n]){var l={};var k;for(k=0;k<i.length;k++){var m=i[k];l[m]=g(n,m)}h[n]=l}return h[n]}}());function f(l,n,k){var h="tl-a-"+n.id;var g=n.nubbin?"nubbin-"+n.nubbin+" ":"";var m=$tlJQ('<div class="tagx '+g+h+'" tl-thing-id="'+n.id+'"></div>');e.repositionElement(l,m[0]);var o=d(n.nubbin);var j=n.thingUrl||"";m.attr("href",j);var i;if(j){i=o.hoverlink}else{i=o.hover}var q=$tlJQ('<div class="nubbin"><div class="'+(n&&n.nubbin&&n.nubbin.indexOf("svg")!==-1?"":"nubbinGlow")+'" '+o.highlight+'></div><div class="nubbinIcon" '+o.plain+'></div><div class="nubbinHoverIcon" '+i+"></div></div>");if(!!n.pinned){q.addClass("pinned")}else{q.addClass("unpinned")}q.appendTo(m);var p;if(k){p=$tlJQ('<div id="'+k+'" class="tlThingContainer"></div>')}else{p=$tlJQ('<div class="tlThingContainer" ></div>')}m.appendTo(p);return p}return{render:f}});tlRequire.define("popup",["config","txt"],function(b,a){function c(e,g,m,f){var d=$tlJQ(m,e).first();if(d.length===0){var j=$tlJQ.trim(m.replace(/\./g," "));d=$tlJQ('<div class="'+j+' tlPopup"></div>');var l=$tlJQ('<a href="#" class="tlCloseBtn"></a>');var k=$tlJQ('<div class="tlPopupInner test-sharepopup"></div>');l.bind("vmouseup",function(n){d.hide();return false});if(f){f(k)}if(b.showPoweredBy&&!g.tlImage("isWhitelabel")){var i=b.address+"/?buttonSource="+m;var h=$tlJQ('<hr class="poweredByDivider"/> <div class="thinglinkInfoWrapper"><a style="color: #9FA1A1 !important;" href="'+i+'" class="thinglinkInfo">'+a("poweredBy")+"</a></div>");h.click(function(n){window.open(i)});k.append(h)}d.append(k);d.append(l);e.append(d);$tlJQ("body").click(function(n){if(d.css("display")!=="none"&&$tlJQ(n.target).closest(".tlPopup").length===0){d.fadeOut(250)}})}e.find(".tlPopup").hide();d.show();return false}return{setup:c}});tlRequire.define("positionThing",["jQuery","positionThingAlg","config","util","cssUtil","measure","sceneUtil"],function(h,f,b,a,g,e,d){function c(v){var m=v.attr("tl-thing-id");var p=h("#tl-a-"+m);var I=p.find(".tlArrow");var D=13;var E=p.height();var j=Math.round(((v.height()/2)-E-D));var M=v.closest(".tlImageContainer");var L;if(b.hOverflow!==null){L=b.hOverflow}else{L=true}var F;if(b.vOverflow!==null){F=b.vOverflow}else{F=true}var n=v.offset(),N=h(document.body);var K={left:0,top:0};if(h.inArray(N.css("position"),["absolute","relative"])!==-1){K=a.getOffsetRect(document.body);n.left=n.left-K.left;n.top=n.top-K.top}var U=p.find(".tlThingClose").length>0?21:5;var S=5;var i=function(){var aa;var W;if(F===false){var X=parseInt(v.css("top").replace("px",""),10);aa=X+j-U;var V=M.height();var ac=V-X-v.height();W=ac+j-S}else{var ab=h(window).scrollTop()-K.top;var Y=h(window).height()+ab;aa=n.top+j-U-ab;var Z=Y-n.top-v.height();W=Z+j-S}return{t:aa,b:W}};var A=i();var C=p.find(".tlUpArrow");var H=p.find(".tlCenterArrow");if(A.t<0){I.css("cssText","display:none;");if(A.b>0){j=Math.round((v.height()/2)+13);I=C;if(I.length===0){I=h('<div class="tlUpArrow"></div>');p.prepend(I)}}else{C.css("cssText","display:none;");j=j-A.t;I=H;if(I.length===0){I=h('<div class="tlCenterArrow"></div>');h(".tlThingContent",p).before(I)}}}else{C.css("cssText","display: none;")}var z=I[0]?g.parseCssText(I[0].style.cssText):{};z.display="";I.css("cssText","");var R=p[0]?g.parseCssText(p[0].style.cssText,true):{};var o="min-width: "+R["min-width"]+"px !important; z-index: "+p.css("z-index")+"; display: block;";if(R["max-width"]){o=o+"max-width: "+R["max-width"]+"px !important;"}if(R.opacity){o=o+"opacity: "+R.opacity+";"}if(R.visibility){o=o+"visibility: "+R.visibility+";"}var P=e.getDimensions(p).w;var k=(window.ActiveXObject||"ActiveXObject" in window)?"width: "+P.toString()+"px !important;":"";var G=v.width();var l=Math.round((G-P)/2);var O=parseInt(v.css("left").replace("px",""),10);if(M.css("box-sizing")==="content-box"){var J=e.getExtent(M[0]);var T=J["padding-left"];O=O-T}var y=M.width();var t=5;var s=p.find(".tlThingClose").length>0?21:5;var u=O+l-t;var Q=y-s-(O+l+P);var x=0;var r;if(L===false&&u<0&&Q>0){x=-u}else{if(L===false&&Q<0&&u>0){x=Q}else{if(window.ActiveXObject||"ActiveXObject" in window){I.css("cssText",k)}}}C=p.find(".tlUpArrow");if(C.length&&C.css("display")!="none"){p.addClass("tlUpArrowInside")}else{p.removeClass("tlUpArrowInside")}p.css("cssText","display:none !important;");var w=function(){var W=h(window).scrollLeft()-K.left;var Z=a.getWindowSize().w+W;var Y=(n.left+l+x);var V=Y-t-W;var X=Z-(Y+P+s);return{l:V,r:X}};var B=w();if((B.l+B.r)<0){t-=5;s-=5;B=w()}x=f.applyHorizontalWindowLimitsToDisplacement(x,B,K,p.hasClass("tlPlaying"));z.left=(-x)+"px !important;";if(x!==0){l=l+x}if(I.length>0){I.css("cssText",I[0].style.cssText+a.mapToCssText(z))}var q={left:0,top:0};if((d.isThinglinkSceneView())||(h("#tlTagContainer").closest(".tlFullscreen").length>0)){q=h("#tlTagContainer").offset()}p.css("cssText",o+"top: "+(n.top+j-q.top).toString()+"px !important; left: "+(n.left+l-q.left).toString()+"px !important;")}return c});tlRequire.define("positionThingAlg",["util"],function(b){function a(c,i,k,f){var l=c;if(i.l<0&&i.r>0){l=l-i.l}else{if(i.r<0&&f){var g=0;if(i.l<i.r){g=i.r-i.l;if(g>5){g=5}}i.r-=g;l=l+i.r}else{if(i.r<0&&i.l>0){l=l+i.r}else{if(i.r<0&&i.l<0){var j=$tlJQ(window).scrollLeft()-k.left;var e=b.getWindowSize().w+j;var m=-k.left;var h=$tlJQ(window).width()+m;var n=j+i.l-m;var d=(h-e)+i.r;if(d<0){l=l+d}else{if(n<0){l=l-n}}}}}}return l}return{applyHorizontalWindowLimitsToDisplacement:a}});tlRequire.define("postMessageManager",["namespace","jQueryPostMessage","EventDispatcher","config","util"],function(c,o,a,b,g){var q=c.postMessageManager;if(typeof q==="undefined"||typeof q.addListener==="undefined"){var e={};var p={};var l=function(){e={};p={}};var m=function(s,t){var r=g.getSourceDomain(s);p[r]=true;if(!t){var u=false;while(!u){t=(" "+Math.random()).substr(3);if($tlJQ("#"+t).length===0){u=true}}}e[t]=r;return t};var k=function(r){if(p[r]){return true}return false};var h=function(r){return r.replace(/^https?:/,"")};var d=function(v){var r=v.data;if(typeof(r)!=="string"){return}var y=r.split("/");var w=y[0];var s=y[1];var t=y.slice(2);var x=v.origin;if(x){var u=e[w];if(!u||h(x)!==h(u)){return}}var z=[s,f(w),t];q.trigger("postMessageCommand",z)};var f=function(s){var r=$tlJQ("#"+s);var t;if(r.length===0){t=$tlJQ(".rtid-"+s)}else{t=r.find(".tagx")}if(t.length===0){return}return t};var j=function(){$tlJQ.receiveMessage(d,k)};var i=function(s){var w=window.location.href.split("#")[0];var t="";var v="";var r="";try{t=m(s);v=encodeURIComponent(w);r="#rtid="+t+"&target="+v;if(!!b.referer){r+="&referer="+encodeURIComponent(b.referer)}if(b.preventNavigation){r+="&preventNavigation=true"}if(s.indexOf("#")>0){r="&"+r.substring(1)}}catch(u){}return{rtid:t,target:v,srcPmParams:r}};var n=function(){};n.prototype=new a();n.prototype.init=j;n.prototype.reset=l;n.prototype.prepareAndGetParameters=i;n.prototype.registerThing=m;q=new n();c.postMessageManager=q}return q});tlRequire.define("sceneCache",[],function(){var b={};function a(e,d){b[e]=d}function c(d){return b[d]}return{getCacheSceneId:c,setCacheSceneId:a}});tlRequire.define("sceneUtil",["jQuery","util"],function(h,d){function a(j){return h("img[tl-scene-id="+j+"]").closest(".tlImageContainer")}function c(j){return j.find("img").attr("tl-scene-id")}function g(j){return a(j).find(".tlMenuItem").hasClass("tlUntouch")}function f(j){return a(j).find(".tlMenuLabelTouch").data("tlTouchCount")}function i(l,j){var k=h(l);var m=k[0].src.replace(/#.*$/,"");if(j){m=m+";"+j}return m}function b(){return h("body").hasClass("permaScene")||h("body").hasClass("permaVideo")||h("body").hasClass("tl-spa-body")}function e(){h(".tlThingClose").mouseup()}return{findImageContainer:a,getContainerSceneId:c,isSceneTouched:g,getSceneTouchCount:f,isThinglinkSceneView:b,getSceneUrl:i,closeAllStickyTags:e}});tlRequire.define("sharePopup",["util","config","postMessageManager","popup","hashing","sceneUtil","measure"],function(g,d,j,b,c,f,a){function h(k){return d.sslAddress+"/scene/"+k}function i(n){var r=n.tlImage("sceneData");var s=n.closest(".tlImageContainer");if(!n){return}var m=n.attr("tl-scene-id");var p=c.generateImageHash(n[0]);var k=encodeURIComponent(h(m));var o;var t=$tlJQ('head meta[name="identifier-URL"]').attr("content");if(!!t){o=t}if(d.isThinglinkSite()&&!o){o=k}else{if(!o){o=window.location.href}var q=o.indexOf("#");if(q===-1){o=encodeURIComponent(o)+"%23tl-"+p}else{if(q==o.length-1||o.substring(q,q+4)==="#tl-"){o=encodeURIComponent(o.substring(0,q))+"%23tl-"+p}else{o=encodeURIComponent(o)}}}return o}function e(t,q,w){f.closeAllStickyTags();var o=$tlJQ("#tlOverlayContainer");if(o.length===0){o=$tlJQ('<div id="tlOverlayContainer"/>').appendTo("body")}var n=".tlShareIframePopup.tl-item-"+w.id;var m=$tlJQ(n,o);if(m.length>0){m.show()}else{b.setup(o,q,".tlShareIframePopup.tlSharePopup.tl-item-"+w.id,function(A){var z=d.getBaseUrl()+"/embed/share/"+w.id;var E=j.prepareAndGetParameters(z).srcPmParams;var B=g.getDomain(window.location.href);var D=B?c.adler32(B):"";var C=$tlJQ(document).innerHeight();var y=Math.min(C-50,260);var x=$tlJQ('<iframe id="tlSharingFrame" src="'+z+"?shareUrl="+i(q)+"&domainHash="+D+E+'" type="text/html" height="'+y+'px" + frameBorder="0"></iframe>');A.append(x)})}if(m.length===0){m=$tlJQ(n,o)}var k=a.getDimensions(q).w;var r=q.offset();var v=a.getDimensions(m).w;var s=$tlJQ(t).find(".tlSidebar").width()+10;var p=parseInt(r.left+k-v-s,10);var l=$tlJQ(window).width();if(p<0){p=0}else{if(p-v>l){p=l-v}}var u=r.top<13?13:r.top;m.css("cssText",m[0].style.cssText+"; left: "+p+"px !important; top: "+u+"px !important;")}return{setup:e}});tlRequire.define("statusManager",["namespace","config","callbackManager"],function(d,c,b){function a(e){d.status=e;if(c.eventManager&&c.eventManager.trigger){c.eventManager.trigger("statusChanged",e)}b.triggerEvent(e)}return{setStatus:a}});tlRequire.define("tagEventHandlers",["jQuery","callbackManager","eventDebounce","positionThing","actionLogger","imageEventHandlers","config","jUtil","util","cssUtil","customization"],function(o,j,d,c,l,q,t,n,a,k,g){var h=a.isTouchDevice;var s=function(w,v,y){var x=w.find(".thinglinkImage").first();var u=x.attr("tl-scene-id");l.logClick(v,u,x,y)},b=function(w,v){var x=w.find(".thinglinkImage").first();var u=x.attr("tl-scene-id");l.logHover(v,u,x)},p=function(w,v){var x=w.find(".thinglinkImage").first();var u=x.attr("tl-scene-id");l.logHoverEnd(v,u,x)};var e=function(A,y,C,w,x){var B;if(A.nubbin.tlTag("isImageTag")){B=function(D){s(w,C.id,D)}}var z=(t.preventNavigation||C.openlink==="NONE")&&!(C.theme=="rich"&&C.contentUrl&&A.bubble.find(".tlSpinner").length===0);if(!z&&C.theme=="iframe"){z=!A.bubble.hasClass("iframeLoaded")}var v=x.target.tagName.toLowerCase()==="img"?null:x.target.href;z=x.target.tagName.toLowerCase()==="audio"||z;if(!v&&x.target.tagName.toLowerCase()==="span"){v=x.target.parentNode.href}var u=v||A.nubbin.attr("href");if(!z){z=!u}if(!z){y.clickHandler.call(this,u,A.nubbin,B);return true}if(B){B()}return false},i=function(u){u=u||n.getThingPieces(this);if(!u.bubble.hasClass("tlPlaying")){setTimeout(function(){if(!u.bubble.hasClass("mouseover")&&!u.nubbin.hasClass("mouseover")){if(u.nubbin.hasClass("hovered")){var w=u.nubbin.attr("tl-thing-id");var x=u.nubbin.parents(".tlImageContainer");p(x,w);var v=u.bubble.find("audio");if(v.length){v[0].pause()}}u.nubbin.removeClass("linked hovered");u.bubble.hide()}},50)}},r=function(w,u,x){var v=u;if(w&&w.clientX){v=document.elementFromPoint(w.clientX,w.clientY)}if(v==x.nubbin.find(".nubbinHoverIcon")[0]){if(!x.nubbin.hasClass("mouseover")){x.nubbin.addClass("mouseover")}if(!u.hasClass("mouseover")){u.addClass("mouseover")}}else{if((v===u)||(v==u.find(".thinglinkImage")[0])){if(!u.hasClass("mouseover")){u.addClass("mouseover")}i(x)}else{i(x);q.hideNubbins(u)}}};j.runAfter("initcomplete",function(){if(h){o(document).unbind("vclick.tlBubbleHide").bind("vclick.tlBubbleHide",function(v){var u=v.target||v.srcElement;o(".tlImageContainer .tagx.hovered").each(function(){var w=n.getThingPieces(this);w.bubble.mouseleave();if(w.bubble.hasClass("mouseover")){w.bubble.trigger("mouseleave")}if(w.nubbin.hasClass("mouseover")){if(o("#tlTagContainer").has(v.target).length===0){w.nubbin.removeClass("mouseover");r(v,o(u).closest(".tlImageContainer"),w)}}})})}});function m(u,y){y=y||n.getThingPieces(this);var x=y.bubble.data("bubbledata");var C=y.nubbin.data("thing");if(x&&x.hoverHandler){u=x.hoverHandler}if(u){u()}c(y.nubbin);var A,B;if(C&&typeof(C.styles)!=="undefined"){B=C.styles;A=g.mergeParcelData(C.styles,C.productName,C.properties)}else{if(y.nubbin.data("tlParcel")){A=y.nubbin.data("tlParcel")}}var z=a.getSourceDomain(C.contentUrl);g.applyNewCustomization(y.bubble,A,z);var w=(C&&typeof(C.opacity)!=="undefined")?C.opacity:1;if(w>0.01){y.bubble.show();y.bubble.css("opacity",w)}else{y.bubble.css("visibility","hidden")}if(y.nubbin.attr("href")){if(C.openlink!=="NONE"||C.theme==="rich"){y.nubbin.addClass("linked")}}y.nubbin.addClass("hovered");var v=y.bubble.find("audio");if(v.length&&document.location.href.indexOf("embed/editor?")===-1){v[0].play()}}function f(F,x){var B=n.getThingPieces(F),A=B.bubble.data("bubbledata"),E=B.nubbin.data("thing"),w=false;x=x||B.nubbin.closest(".tlImageContainer");var y=function(H,G){G=G||B;G.nubbin.removeClass("mouseover");r(H,x,G)};var z={};var C=function(H,I){z.hideBubblesForAllExcept(B.nubbin);if(!H){var G=null;if(A&&A.hoverHandler){G=A.hoverHandler}m(G,B);if(I){b(x,E.id)}}B.nubbin.addClass("mouseover");if(!x.hasClass("mouseover")){x.addClass("mouseover")}};var v=function(G){x.find(".tagx").not(G).each(function(){var H=n.getThingPieces(this);H.bubble.removeClass("mouseover");H.nubbin.removeClass("mouseover");i(H)})};z={mouseOverNubbin:C,attemptTagClick:e,hideBubblesForAllExcept:v};var D=false;var u=false;B.nubbin.unbind("vmouseout vmousecancel").bind("vmouseout vmousecancel",d({after:function(G,H){D=false},threshold:50}));if(B.nubbin.tlTag("isImageTag")){B.nubbin.unbind("mouseenter vclick").bind("mouseenter vclick",d({before:function(G,H){H.nubbinsVisible=x.hasClass("tlHover");H.bubbleVisible=B.nubbin.hasClass("hovered");D=D||!H.nubbinsVisible;if(!H.nubbinsVisible){H.nubbinsVisible=(B.nubbin.find(".nubbinGlow").css("display")!="none");q.showNubbins(x)}if(H.nubbinsVisible){z.mouseOverNubbin(H.bubbleVisible,true)}w=true},everyTime:function(H,L,K){if(H==="mouseenter"){if(h&&(!L.bubbleVisible)&&(!L.vclickInThisSequence)){u=true}}if((H==="vclick")&&(L.vclickInThisSequence)){return}if(H==="vclick"){L.vclickInThisSequence=true}if(L.lastOrigEventType==="click"){u=false}var J=(typeof(E.opacity)!=="undefined")&&(E.opacity<0.01);var G=(!h||!D)&&L.nubbinsVisible&&L.bubbleVisible;if((G||J)&&!u&&(H==="vclick")){L.vclickInThisSequence=true;var I=z.attemptTagClick(B,A,E,x,K);if(I){B.nubbin.trigger("mouseleave")}}else{if(H=="mouseenter"){w=true}}if(L.lastOrigEventType==="touchend"){u=false}},after:function(H,I){var G=(typeof w=="function");if(!I.nubbinsVisible&&!h&&!G){z.mouseOverNubbin(I.bubbleVisible,true)}else{if(G){w()}}w=false},threshold:70}))}else{B.nubbin.unbind("mouseenter vclick").bind("mouseenter vclick",d({before:function(G,H){H.nubbinsVisible=x.hasClass("tlHover");H.bubbleVisible=B.nubbin.hasClass("hovered");D=D||!H.nubbinsVisible;z.mouseOverNubbin(H.bubbleVisible,false)},everyTime:function(G,H){if(H.bubbleVisible&&G=="vclick"){z.attemptTagClick(B,A,E,x)}},threshold:50}))}B.nubbin.unbind("mouseleave").bind("mouseleave",function(G){if(w){w=y}else{y(G)}});B.bubble.unbind("mouseenter").bind("mouseenter",function(G){B.bubble.addClass("mouseover")});B.bubble.unbind("mouseleave").bind("mouseleave",function(G){B.bubble.removeClass("mouseover");r(G,x,n.getThingPieces(B.bubble))});B.bubble.unbind("vmouseup").bind("vmouseup",d({before:function(G,H){H.tagBubbleClickHandled=false},everyTime:function(G,I,H){if(!I.tagBubbleClickHandled){z.attemptTagClick(B,A,E,x,H);I.tagBubbleClickHandled=true}},after:function(G,H){B.bubble.trigger("mouseenter");y(null)},threshold:20}));B.bubble.unbind("vclick").bind("vclick",function(G){return false});B.bubble.find(".tlHashTag").unbind("vmouseup").bind("vmouseup",function(G){window.open(this.href);return false});if(E.theme=="rich"){B.bubble.find(".tlThingFooter a").unbind("vmouseup").bind("vmouseup",function(G){window.open(this.href);return false})}B.bubble.find(".tlThingClose").bind("vmouseup",function(I){I.preventDefault();I.stopPropagation();B.bubble.removeClass("tlPlaying iframeLoaded");var G=B.bubble.find(".tlRichIframe");G.hide().remove();var H=B.bubble.find(".tlIframe");if(H.length>0){H.hide().remove();B.bubble.find(".tlSpinner").removeClass("loaded").show()}B.bubble.removeClass("mouseover").hide();y(I,B);if(h&&!x.hasClass("mouseover")){x.addClass("mouseover")}return false});return{_i:z}}return{attach:f,prepareTagForDisplay:m}});tlRequire.define("tagFetcher",["jQuery","util","config"],function(d,b,c){var a=function(){var n;var i;function l(u,p){var t=[];var s="",q;if(u){for(q=0;q<u.length;q++){var v=b.cleanURIEncoding(u[q]);if((s.length+v.length+2)<p){if(s.length>0){s+="|"}s+=v}else{t.push(s);s=v}}if(s.length>0){t.push(s)}}return t}var g=[];var m;var o=[];function e(r,p,q){g=g.concat(r);if(p){o=o.concat(p)}if(m){clearTimeout(m);m=null}m=setTimeout(function(){j(g,{forceSecure:c.forceSecure,referer:c.referer,reload:q,manualViewStats:c.manualViewStats,passkeys:o});g=[];m=null},80)}function j(B,s){var A=c.getApiBaseUrl();var r=l(B,1650);var t=r.length;var z=function(C){if(n){n(C)}t=t-1;if(t===0&&i){i()}};var v;var q=d(window);var y=q.width();var w=q.height();var p=l(s.passkeys,2000);for(v=0;v<r.length;v++){var x=r[v];var u={url:x,p:v,passkeys:p[0]};u.vw=y;u.vh=w;if(window.__tlid!==undefined){u.massId=window.__tlid}if(s.forceSecure){u.forceSecure=true}if(s.referer){u.referer=s.referer}if(s.manualViewStats){u.skipStats=true}if(s.reload){u.reloadNonce=Math.floor(Math.random()*10000000)}d.ajax({url:A+"/api/tags",data:u,dataType:"jsonp",success:z})}}function k(s,q,r){var p=b.extractSceneId(s);if(p!==""&&p.charAt(0)!=="$"){s=p}if((s.length===undefined)||typeof(s)==="string"){s=[s]}else{if(s.length>1){s=s.sort()}}e(s,q,r)}function f(p){i=p}function h(p){n=p}return{fetchTags:k,dataReceivedCallback:h,finalFetchCompleteCallback:f,listify:l}};return a()});tlRequire.define("touchManager",["config","txt","sceneUtil","postMessageManager","EventDispatcher"],function(s,h,o,c,t){var j;var g;var d;var e;function a(v){var u={title:"",content:""};u.title=h("TouchDialogPreSignup.TitleDoYouLikeThisImage");u.content=h("TouchDialogPreSignup.ContentDoYouLikeThisImage",'<a href="#">',"</a>");return u}function r(v,w){var u=o.getContainerSceneId(v);if(!v){v=o.findImageContainer(u)}if(e){b(v,u,w)}else{f(v,u)}}function q(x,v,u){if(g){clearTimeout(g);g=null}if(u&&u>100){return}var w;if(!u){w=3000;u=0}else{if(u<60){w=1000}else{w=3000}$tlJQ.ajax({url:s.getApiBaseUrl()+"/api/me",cache:false,dataType:"jsonp",success:function(y){if(y.name){clearTimeout(g);g=null;if(d){d.close();d=null}n(x,v)}else{if(!d||(d&&d.closed===true)){clearTimeout(g);g=null}}}})}g=setTimeout(function(){q(x,v,u+1)},w)}function f(w,v){var z="tlTouchPreSignupPopup";var A=o.getSceneTouchCount(v);var B=a(A);var u=w.find("."+z).first();if(u.length===0){u=$tlJQ('<div class="'+z+' tlTouchPopup tlPopup"></div>');var D=$tlJQ('<div class="tlPopupInner"><h3></h3><p class="tlTouchPopupContent" style="text-align:center !important;"></p></div>');var y=$tlJQ('<a href="#" class="tlCloseBtn"></a>');y.bind("vmouseup",function(E){u.hide();return false});u.append(D);u.append(y);var x=u.find("p.tlTouchPopupContent");x.append(B.content);x.find("a").click(function(){m(w,v)});w.append(u)}w.find(".tlPopup").hide();var C=u.find("h3");C.html(B.title);setTimeout(function(){u.show()},10)}function m(w,u){var A=s.sslAddress+"/embed/touchLogin";var x=c.prepareAndGetParameters(A);var y=x.rtid;var z=x.target;var v=s.sslAddress+"/auth/connect?response_type=code&client_id="+s.clientId+"&state="+y+"/touchLogin/"+u+";"+z+"&redirect_uri="+encodeURIComponent(A);d=window.open(v,null,"width=950,height=588,scrollbars=yes");q(w,u)}function b(v,u,w){var x;if(w){x="untouch"}else{x="touch"}$tlJQ.ajax({url:s.sslAddress+"/api/scene/"+u+"/touch?method="+x,cache:false,dataType:"jsonp",success:function(A){var y;if(!A.error){var z;if(!A.results.touched&&x==="untouch"){z=-1}else{if(A.results.touched&&x==="touch"){z=1}}i.trigger("updateSceneTouchStatus",[A.results.touched,u,z]);y=o.getSceneTouchCount(u)}l(v,A,u,y)}})}function l(x,w,v,A){var z="tlTouchStatusPopup";if(A<0){A=0}var u=x.find("."+z).first();if(u.length===0){u=$tlJQ('<div class="'+z+' tlTouchPopup tlPopup"></div>');var C=$tlJQ('<div class="tlPopupInner"><h3></h3><p></p></div>');u.append(C);x.append(u)}x.find(".tlPopup").hide();var B=u.find("h3");var y=u.find("p");if(w.error){B.text(h("TouchDialog.TitleError"))}else{if(w.results.touched){B.text(h("TouchDialog.TitleTouch"))}else{B.text(h("TouchDialog.TitleUntouch"))}if(A===1){y.text(h("TouchDialog.TouchesOne"))}else{if(A===0){y.text(h("TouchDialog.TouchesNo"))}else{y.text(h("TouchDialog.TouchesOther",A))}}}u.stop(true,true).show();if(j){clearTimeout(j);j=null}j=setTimeout(function(){u.hide(500);j=null},1300)}function n(v,u){e=true;r(v,o.isSceneTouched(u))}function k(u){e=u}var p=function(){};p.prototype=new t();p.prototype.touch=r;p.prototype.touchLoginCallback=n;p.prototype.setUserLoggedIn=k;var i=new p();return i});tlRequire.define("txt",["jQuery","config"],function(d,c){var a={poweredBy:{en:"Powered by ThingLink",fi:"Teknologiasta vastaa ThingLink",ru:" ThingLink",pt:"Desenvolvido por ThingLink",es:"Ofrecido por ThingLink",pl:"Zasilane przez ThingLink",it:"Gestito da ThingLink",ja:"ThingLink",fr:"Dvelopp par ThingLink",de:"Betrieben von ThingLink",hi:"ThingLink  ",zh:" ThingLink ",sv:"Utvecklat av ThingLink"},CopyToClipBoard:{en:"Copy to clipboard",fi:"Kopioi leikekirjaan",ru:"  ",pt:"Copiar para a rea de transferncia",es:"Copiar al portapapeles",pl:"Skopiuj do schowka",it:"Copia negli appunti",ja:"",fr:"Copier dans le presse-papiers",de:"In Zwischenablage kopieren",hi:"   ",zh:"",sv:"Kopiera till urklipp"},Copied:{en:"Copied",fi:"Kopioitu",ru:"",pt:"Copiado!",es:"Copiado!",pl:"Skopiowano!",it:"Copiato!",ja:"",fr:"Copi!",de:"Kopiert!",hi:"  ",zh:"",sv:"Kopierad"},"Share.OrJustShareThisAddress":{en:"Or just share this address:",fi:"Tai jaa tm osoite:",ru:"   :",pt:"Ou apenas partilhar este endereo:",es:"O comparte solamente esta direccin:",pl:"Lub podziel si tylko tym adresem:",it:"Oppure condividi solo questo indirizzo:",ja:"",fr:"Ou partager seulement cette adresse:",de:"Oder nur diese Adresse teilen:",hi:"      :",zh:"",sv:"Eller dela den hr adressen:"},OriginallyThinglinked:{en:"Source {0}",de:"Quelle {0}",es:"Fuente {0}",fi:"Lhde {0}",fr:"Source {0}",hi:" {0}",it:"Fonte {0}",ja:" {0}",pl:"rdo {0}",pt:"Fonte {0}",ru:" {0}",sv:"Klla {0}",zh:" {0}"},"ContextMenu.Fullscreen":{en:"Fullscreen",fi:"Esitystila",sv:"Helskrm",de:"Vollbild",es:"Pantalla total",fr:"Plein cran",hi:" ",it:"Tutto schermo",ja:"",pl:"Peny ekran",pt:"Ecr inteiro",ru:" ",zh:""},"ContextMenu.Touch":{en:"Touch image",fi:"Kosketa kuvaa",de:"Bild berhren",es:"Dar un Toque a la imagen",fr:"Touchez l'image",hi:"  ( )",it:"Tocca l'immagine",ja:"",pl:"Dotknij obraz",pt:"Toque na imagem",ru:" ",sv:"Peka p bilden",zh:""},"ContextMenu.Share":{en:"Share image...",fi:"Jaa kuva...",ru:"  ...",pt:"Partilhar Imagem...",es:"Compartir imagen...",pl:"Podziel si obrazkiem...",it:"Condividi l'Immagine...",ja:"...",fr:"Partager l'image...",de:"Share Image...",hi:"   ...",zh:"...",sv:"Dela bilden..."},"ContextMenu.Embed":{en:"Embed image...",fi:"Upota kuva...",ru:"  ...",pt:"Inserir Imagem...",es:"Insertar imagen...",pl:"Umie obrazek...",it:"Incorpora l'Immagine...",ja:"...",fr:"Image incorpore...",de:"Bild einbetten...",hi:"   ...",zh:"...",sv:"Infoga bilden..."},"Sidebar.Touch":{en:"Touch",fi:"Kosketa",de:"Berhren",es:"Tocar",fr:"Toucher",hi:" ",it:"Tocca",ja:"",pl:"Stuknij",pt:"Tocar",ru:"",sv:"Peka p",zh:""},"Sidebar.Untouch":{en:"Untouch",fi:"Poista kosketus",de:"Berhrung aufheben",es:"No tocar",fr:"D-Toucher",hi:"  ",it:"Annulla Tocca",ja:"",pl:"Odhacz stuknicie",pt:"Intacto",ru:" ",sv:"Peka av",zh:""},"Sidebar.Share":{en:"Share",fi:"Jaa",ru:"",pt:"Partilhar",es:"Compartir",pl:"Udostpnij",it:"Condividi",ja:"",fr:"Partager",de:"Teilen",hi:" ",zh:"",sv:"Dela"},"Sidebar.Edit":{en:"Edit",fi:"Muokkaa",ru:"",pt:"Editar",es:"Editar",pl:"Edytuj",it:"Modifica",ja:"",fr:"diter",de:"Bearbeiten",hi:" ",zh:"",sv:"Redigera"},"Sidebar.Delete":{en:"Delete",fi:"Poista",ru:"",es:"Borrar",pt:"Excluir",pl:"Usu",it:"Elimina",ja:"",fr:"Effacer",de:"Lschen",se:"Ta bort",hi:"",zh:""},"Sidebar.Remix":{en:"Remix",fi:"Remiksaa",ru:"",es:"Remezclar",pt:"Recombinar",pl:"Remiksuj",it:"Remixa",ja:"",fr:"Remixer",se:"Blanda igen",hi:" ",zh:""},"Sidebar.Report":{en:"Report",fi:"Raportoi",ru:"",es:"Informe",pt:"Relatar",pl:"Zgo",it:"Riporta",ja:"",fr:"Rapporter",de:"Remixen",se:"Rapportera",hi:" ",zh:""},"Sidebar.Create":{en:"Create",fi:"Tee uusi",ru:"",es:"Crear",pt:"Criar",pl:"Utwrz",it:"Crea",ja:"",fr:"Crer",de:"Melden",se:"Skapa",hi:" ",zh:""},"Sidebar.Comment":{en:"Comment",fi:"Kommentoi",ru:"",es:"Cometar",pt:"Comentar",pl:"Komentuj",it:"Commenta",ja:"",fr:"Commenter",de:"Kommentieren",se:"Kommentera",hi:" ",zh:""},"Sidebar.Fullscreen":{en:"Fullscreen",fi:"Esitystila",sv:"Helskrm",de:"Vollbild",es:"Pantalla total",fr:"Plein cran",hi:" ",it:"Tutto schermo",ja:"",pl:"Peny ekran",pt:"Ecr inteiro",ru:" ",zh:""},"Sidebar.Like":{en:"Like",fi:"Tykk",ru:"",es:"Me gusta",pt:"Gostar",pl:"Polub",it:"Mi piace",ja:"",fr:"Aimer",de:"Liken",se:"Gilla",hi:" ",zh:""},"Sidebar.Stats":{en:"Stats",fi:"Tilastot",ru:"",es:"Estadsticas",pt:"Estatsticas",pl:"Statystyki",it:"Statistiche",ja:"",fr:"Stats",de:"Statistiken",se:"Statistik",hi:" ",zh:""},"Sidebar.Post":{en:"Post",fi:"Julkaise",ru:"",sv:"Publicera",es:"Publicar",pt:"Publicar",pl:"Przelij",ja:"",de:"Posten",hi:" ",it:"Pubblica",fr:"Diffuser",zh:""},"TouchDialogPreSignup.ContentOriginal":{en:"To touch {0}Sign in!{1} Touching marks the image as a favorite and shares it with those who follow you.",fi:"{0}Kirjaudu sisn{1} koskettaaksesi! Kun kosketat kuvaa, se tallentuu itsellesi ja nkyy niille, jotka seuraavat sinua.",ru:"{0}{1},  !          ,    .",es:"Para tocar {0}Inscrbete!{1} Al tocarla se marca la imagen como favorita y se comparte con aquellos que te siguen.",pt:"Para tocar {0}Inicie sesso!{1} Tocar assinala a imagem como favorita e partilha-a com aqueles que o seguem.",pl:"Aby stukn, {0}zaloguj si!{1} Stuknicie zaznacza obraz jako ulubiony i udostpnia go tym, ktrzy Ci obserwuj.",it:"Per toccare, {0}Accedi!{1} L'immagine toccata verr aggiunta ai preferiti e verr condivisa con le persone che ti seguono.",ja:"{0}{1} ",fr:"Pour toucher {0}inscrivez-vous!{1} Le fait de toucher classe l'image dans les favoris et vous la partagez avec ceux qui vous suivent.",de:"Zum Berhren {0}anmelden!{1} Durch Berhrung wird das Bild als Favorit markiert und mit allen, die dir folgen, geteilt.",se:"Peka p {0}Registrera dig!{1} Detta markerar bilden som favorit och delar den med de som fljer dig.",hi:"    {0} !{1}                       ",zh:"{0}{1}"},"TouchDialog.TitleError":{en:"Error touching",fi:"Kosketus ei onnistunut"},"TouchDialog.TitleTouch":{en:"Touched image",fi:"Kosketettu",de:"Berhrtes Bild",es:"Imagen con Toques",fr:"Image touche",hi:"  ",it:"immagine toccata",ja:"",pl:"Dotknity obraz",pt:"Imagem tocada",ru:" ",sv:"Pekat p bilden",zh:""},"TouchDialog.TitleUntouch":{en:"Untouched image",fi:"Kosketus poistettu",de:"Unberhrtes Bild",es:"Imagen sin Toques",fr:"Image d-touche",hi:" ",it:"immagine con tolto il tocco",ja:"",pl:"Dotknicie cofnite",pt:"Imagem intocada",ru:" ",sv:"Pekat av bilden",zh:""},"TouchDialog.TouchesOne":{en:"One touch on the image",fi:"Yksi kosketus",de:"1 Berhrung des Bildes",es:"1 Toque en la imagen",fr:"1 Touche sur cette image",hi:"  1    ",it:"1 Tocco sull'immagine",ja:"1",pl:"1 dotyk na obrazie",pt:"1 Toque na imagem",ru:"1  ",sv:"1 pekning p bilden",zh:"1"},"TouchDialog.TouchesNo":{en:"No touches on the image",fi:"Ei kosketuksia",de:"Kein es gefllt mir auf dem Bild.",es:"La imagen no tiene Toques",fr:"Pas de Touche sur cette image",hi:"    ",it:"Nessun Tocco sull'immagine",ja:"",pl:"Brak dotykw na obrazie",pt:"Sem toques na imagem",ru:"  ",sv:"Bilden har inte pekats p",zh:""},"TouchDialog.TouchesOther":{en:"{0} touches on the image",fi:"{0} kosketusta",de:"{0} Berhrungen des Bildes",es:"{0} Toques en la imagen",fr:"{0} Touches sur cette image",hi:"  {0}    ",it:"{0} Tocchi sull'immagine",ja:"{0}",pl:"{0} dotykw na obrazie",pt:"{0} Toques na imagem",ru:"{0}  () ",sv:"{0} pekningar p bilden",zh:"{0}"},"TouchSidebarButton.TouchesOne":{en:"One touch on the image",fi:"Yksi kosketus",de:"1 Berhrung des Bildes",es:"1 Toque en la imagen",fr:"1 Touche sur cette image",hi:"  1    ",it:"1 Tocco sull'immagine",ja:"1",pl:"1 dotyk na obrazie",pt:"1 Toque na imagem",ru:"1  ",sv:"1 pekning p bilden",zh:"1"},"TouchSidebarButton.TouchesNo":{en:"Collect images you like!",fi:"Ker kuvia, joista pidt!",de:"Sammle Bilder, die Dir gefallen!",es:"Colecciona las imgenes que te gusten!",fr:"Collectionez les images que vous aimez",hi:"    !",it:"Raccogli le immagini che ti piacciono!",ja:"",pl:"Zbieraj obrazy, ktre lubisz!",pt:"Recolha imagens de que gosta!",ru:" ,   !",sv:"Samla bilder du gillar!",zh:""},"TouchSidebarButton.TouchesOther":{en:"{0} touches on the image",fi:"{0} kosketusta",de:"{0} Berhrungen des Bildes",es:"{0} Toques en la imagen",fr:"{0} Touches sur cette image",hi:"  {0}    ",it:"{0} Tocchi sull'immagine",ja:"{0}",pl:"{0} dotykw na obrazie",pt:"{0} Toques na imagem",ru:"{0}  () ",sv:"{0} pekningar p bilden",zh:"{0}"},"TouchDialogPreSignup.TitleDoYouLikeThisImage":{en:"Do you like this image? <p style='font-weight: bold !important; display: inline;'>TOUCH it!</p>",fi:"Pidtk tst kuvasta? <p style='font-weight: bold !important; display: inline;'>KOSKETA sit!</p>",de:"Mgen Sie dieses Bild? <p style='font-weight: bold !important; display: inline;'>Bild berhren</p>",es:"Te gusta esta imagen? <p style='font-weight: bold !important; display: inline;'>Dar un Toque a la imagen</p>",fr:"Aimez vous cette image? <p style='font-weight: bold !important; display: inline;'>Touchez l'image</p>",hi:"     ? <p style='font-weight: bold !important; display: inline;'>  ( )</p>",it:"Ti piace questa immagine? <p style='font-weight: bold !important; display: inline;'>Tocca l'immagine</p>",ja:" <p style='font-weight: bold !important; display: inline;'></p>",pl:"Lubisz ten obraz? <p style='font-weight: bold !important; display: inline;'>Dotknij obraz</p>",pt:"Gosta desta imagem? <p style='font-weight: bold !important; display: inline;'>Toque na imagem</p>",ru:"   ? <p style='font-weight: bold !important; display: inline;'> </p>",sv:"Gillar du denna bild? <p style='font-weight: bold !important; display: inline;'>Peka p bilden</p>",zh:" <p style='font-weight: bold !important; display: inline;'></p>"},"TouchDialogPreSignup.ContentDoYouLikeThisImage":{en:"{0}Sign in{1}to ThingLink to create your own interactive images!",fi:"{0}Kirjaudu sisn{1}Thinglink-palveluun ja tee omia interaktiivisia kuvia!",de:"Bei ThingLink {0}anmelden{1}, um eigene interaktive Bilder zu erstellen!",es:"- {0}Regstrate{1} en ThingLink para crear tus propias imgenes interactivas!",fr:"{0}Enregistrez vous{1}  ThingLink pour crer vos propres images intractives",hi:"        ThingLink   {0}   {1}  !",it:"{0}Accedi{1} a ThingLink per creare le tue immagini interattive!",ja:"ThingLink {0}{1}",pl:"{0}Zaloguj si{1} do ThingLink, aby tworzy wasne interaktywne obrazy!",pt:"{0}Inscreva{1}se- no ThingLink para criar as suas prprias imagens interativas!",ru:"{0} {1} ThingLink,     !",sv:"{0}Logga in{1} till ThingLink fr att skapa dina egna interaktiva bilder!",zh:"{0}{1} ThingLink"},"FourDotsButton.MadeWithOrMakeYourOwn":{en:"Made with",fi:"Tee oma",ru:"  ",pt:"Feito com o",es:"Hecho con",pl:"Zrb to sam",it:"Creato con",ja:"",fr:"Ralis avec",de:"Hergestellt mit",hi:"  ",zh:"",sv:"Skapat med"},"FourDotsButton.SignUpShort":{en:"Sign up!",fi:"Rekisteridy!",ru:"!",pt:"Inscrever-se!",es:"Regstrate!",pl:"Zarejestruj si!",it:"Registrati!",ja:"",fr:"S'inscrire!",de:"Melde dich an!",hi:"  !",zh:"",sv:"Registrera dig!"},"FourDotsButton.SignUpLong":{en:"Sign up, it's free!",fi:"Rekisteridy, se on ilmaista!",ru:",  !",pt:"Inscreva-se,  grtis!",es:"Regstrate, es gratis!",pl:"Zarejestruj si, jest to darmowe!",it:"Registrati,  gratis!",ja:"",fr:"Inscrivez-vous, c'est gratuit!",de:"Melde dich an, es ist kostenlos!",hi:"  ,   !",zh:"",sv:"Registrera dig, det r gratis!"},"FourDotsButton.LearnMore":{en:"Learn more",fi:"Lue lis",ru:" ",pt:"Saber mais",es:"Descubra ms",pl:"Dowiedz si wicej",it:"Per saperne di pi",ja:"",fr:"En savoir plus",de:"Mehr erfahren",hi:" ",zh:"",sv:"Lr mer"},"ExceededViews.ImageCreatedByThinglink":{en:"This interactive image was created with ThingLink.",fi:"Tm interaktiivinen kuva luotiin ThingLink-ohjelmalla.",ru:"      ThingLink.",pt:"Esta imagem interativa foi criada com o ThingLink.",es:"Esta imagen interactiva ha sido creada con ThingLink.",pl:"Ten interaktywny obraz zosta stworzony za pomoc ThingLink.",it:"Questa immagine interattiva  stata creata con ThingLink.",ja:"ThingLink",fr:"Cette image interactive a t cre avec ThingLink.",de:"Dieses interaktive Bild wurde mit ThingLink erstellt.",hi:"   ThingLink     ",zh:"ThingLink",sv:"Denna interaktiva bild skapades med ThingLink."},"ExceededViews.VisitThinglinkLink":{en:"View this image on thinglink.com.",fi:"Katso kuva osoitteessa thinglink.com.",ru:"    thinglink.com.",pt:"Ver esta imagem no thinglink.com.",es:"Visualizar esta imagen en thinglink.com.",pl:"Zobacz ten obraz na thinglink.com.",it:"Guarda l'immagine su thinglink.com.",ja:"thinglink.com",fr:"Regardez cette image sur thinglink.com.",de:"Sehen Sie sich dieses Bild auf thinglink.com an.",hi:"   thinglink.com  ",zh:"thinglink.com",sv:"Visa denna bild p thinglink.com."}};var e="en";function b(g){var j=1,f;var h=a[g][c.language||e];if(!h){h=a[g]["en"];if(!h){return""+g+""}}for(f=j;f<arguments.length;f++){h=h.replace("{"+(f-j)+"}",arguments[f])}return h}return b});tlRequire.define("util",[],function(){function o(q){var s=q.indexOf("://");if(s===-1){if(q.substring(0,2)==="//"){s=2}else{s=0}}else{s=s+3}var r=q.indexOf("/",s);if(r===-1){r=q.indexOf("?",s);if(r===-1){r=q.length}}q=q.substring(s,r);r=q.indexOf(":");if(r!=-1){q=q.substring(0,r)}return q}function f(){return"https:"}function h(t){if(!t){return""}var r=t.indexOf("/",8);var s=t.indexOf("?",8);var q=r<0?s:s<0?r:Math.min(r,s);if(q>0){return t.substring(0,q)}return t}function p(s){var r;try{r=decodeURIComponent(s)}catch(t){r=null}return r?encodeURI(r):encodeURI(s)}function d(r){return r.replace(/;\$?\d+$/,"")}function g(s){s=String(s);var r=s.lastIndexOf(";");if(r>0&&r<s.length-1){var t=s.slice(r+1);return t}if(/^\d+$/.test(s)){return s}return""}function c(v,u,t){var s="";var q=u?"!important":"";var r,w;for(r in v){if(v.hasOwnProperty(r)){w=v[r];if(t&&!isNaN(w)&&parseInt(w,10)!==0){w=w+"px"}s+=(r+":"+w+q+";")}}return s}function i(){if(typeof(document.addEventListener)==="undefined"){return true}return false}function e(q){return(q===undefined)}function n(){var q=0;var r=0;if(!window.innerWidth){if(document.documentElement.clientWidth!==0){q=document.documentElement.clientWidth;r=document.documentElement.clientHeight}else{q=document.body.clientWidth;r=document.body.clientHeight}}else{q=window.innerWidth;r=window.innerHeight}return{w:q,h:r}}function k(t){var w=t.getBoundingClientRect();var x=document.body;var r=document.documentElement;var q=window.pageYOffset||r.scrollTop||x.scrollTop;var u=window.pageXOffset||r.scrollLeft||x.scrollLeft;var v=r.clientTop||x.clientTop||0;var y=r.clientLeft||x.clientLeft||0;var z=w.top+q-v;var s=w.left+u-y;return{top:Math.round(z),left:Math.round(s)}}var m=(function(){return document.documentElement&&typeof(document.documentElement.ontouchstart)!="undefined"}());function l(q){return q.parents("div[tl-channel-id]").attr("tl-channel-id")}function b(r,q){var s;for(s in q){if(q.hasOwnProperty(s)){r[s]=q[s]}}return r}function j(){var q=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return q?parseInt(q[2],10):false}function a(r,q){return(q===150)&&(r===300||r===150)}return{cleanURIEncoding:p,extractUrl:d,extractSceneId:g,mapToCssText:c,browserIsUnsupported:i,no:e,getWindowSize:n,getOffsetRect:k,getDomain:o,getProtocol:f,getSourceDomain:h,isTouchDevice:m,getChannelId:l,extend:b,isSVG:a,getChromeVersion:j}});